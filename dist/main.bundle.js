webpackJsonp(["main"],{

/***/ "./node_modules/moment/locale recursive ^\\.\\/.*$":
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/locale/af.js",
	"./af.js": "./node_modules/moment/locale/af.js",
	"./ar": "./node_modules/moment/locale/ar.js",
	"./ar-dz": "./node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/locale/ar.js",
	"./az": "./node_modules/moment/locale/az.js",
	"./az.js": "./node_modules/moment/locale/az.js",
	"./be": "./node_modules/moment/locale/be.js",
	"./be.js": "./node_modules/moment/locale/be.js",
	"./bg": "./node_modules/moment/locale/bg.js",
	"./bg.js": "./node_modules/moment/locale/bg.js",
	"./bm": "./node_modules/moment/locale/bm.js",
	"./bm.js": "./node_modules/moment/locale/bm.js",
	"./bn": "./node_modules/moment/locale/bn.js",
	"./bn.js": "./node_modules/moment/locale/bn.js",
	"./bo": "./node_modules/moment/locale/bo.js",
	"./bo.js": "./node_modules/moment/locale/bo.js",
	"./br": "./node_modules/moment/locale/br.js",
	"./br.js": "./node_modules/moment/locale/br.js",
	"./bs": "./node_modules/moment/locale/bs.js",
	"./bs.js": "./node_modules/moment/locale/bs.js",
	"./ca": "./node_modules/moment/locale/ca.js",
	"./ca.js": "./node_modules/moment/locale/ca.js",
	"./cs": "./node_modules/moment/locale/cs.js",
	"./cs.js": "./node_modules/moment/locale/cs.js",
	"./cv": "./node_modules/moment/locale/cv.js",
	"./cv.js": "./node_modules/moment/locale/cv.js",
	"./cy": "./node_modules/moment/locale/cy.js",
	"./cy.js": "./node_modules/moment/locale/cy.js",
	"./da": "./node_modules/moment/locale/da.js",
	"./da.js": "./node_modules/moment/locale/da.js",
	"./de": "./node_modules/moment/locale/de.js",
	"./de-at": "./node_modules/moment/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/locale/de-at.js",
	"./de-ch": "./node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/locale/de-ch.js",
	"./de.js": "./node_modules/moment/locale/de.js",
	"./dv": "./node_modules/moment/locale/dv.js",
	"./dv.js": "./node_modules/moment/locale/dv.js",
	"./el": "./node_modules/moment/locale/el.js",
	"./el.js": "./node_modules/moment/locale/el.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./eo": "./node_modules/moment/locale/eo.js",
	"./eo.js": "./node_modules/moment/locale/eo.js",
	"./es": "./node_modules/moment/locale/es.js",
	"./es-do": "./node_modules/moment/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/locale/es-do.js",
	"./es-us": "./node_modules/moment/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/locale/es-us.js",
	"./es.js": "./node_modules/moment/locale/es.js",
	"./et": "./node_modules/moment/locale/et.js",
	"./et.js": "./node_modules/moment/locale/et.js",
	"./eu": "./node_modules/moment/locale/eu.js",
	"./eu.js": "./node_modules/moment/locale/eu.js",
	"./fa": "./node_modules/moment/locale/fa.js",
	"./fa.js": "./node_modules/moment/locale/fa.js",
	"./fi": "./node_modules/moment/locale/fi.js",
	"./fi.js": "./node_modules/moment/locale/fi.js",
	"./fo": "./node_modules/moment/locale/fo.js",
	"./fo.js": "./node_modules/moment/locale/fo.js",
	"./fr": "./node_modules/moment/locale/fr.js",
	"./fr-ca": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/locale/fr.js",
	"./fy": "./node_modules/moment/locale/fy.js",
	"./fy.js": "./node_modules/moment/locale/fy.js",
	"./gd": "./node_modules/moment/locale/gd.js",
	"./gd.js": "./node_modules/moment/locale/gd.js",
	"./gl": "./node_modules/moment/locale/gl.js",
	"./gl.js": "./node_modules/moment/locale/gl.js",
	"./gom-latn": "./node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/locale/gom-latn.js",
	"./gu": "./node_modules/moment/locale/gu.js",
	"./gu.js": "./node_modules/moment/locale/gu.js",
	"./he": "./node_modules/moment/locale/he.js",
	"./he.js": "./node_modules/moment/locale/he.js",
	"./hi": "./node_modules/moment/locale/hi.js",
	"./hi.js": "./node_modules/moment/locale/hi.js",
	"./hr": "./node_modules/moment/locale/hr.js",
	"./hr.js": "./node_modules/moment/locale/hr.js",
	"./hu": "./node_modules/moment/locale/hu.js",
	"./hu.js": "./node_modules/moment/locale/hu.js",
	"./hy-am": "./node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/locale/hy-am.js",
	"./id": "./node_modules/moment/locale/id.js",
	"./id.js": "./node_modules/moment/locale/id.js",
	"./is": "./node_modules/moment/locale/is.js",
	"./is.js": "./node_modules/moment/locale/is.js",
	"./it": "./node_modules/moment/locale/it.js",
	"./it.js": "./node_modules/moment/locale/it.js",
	"./ja": "./node_modules/moment/locale/ja.js",
	"./ja.js": "./node_modules/moment/locale/ja.js",
	"./jv": "./node_modules/moment/locale/jv.js",
	"./jv.js": "./node_modules/moment/locale/jv.js",
	"./ka": "./node_modules/moment/locale/ka.js",
	"./ka.js": "./node_modules/moment/locale/ka.js",
	"./kk": "./node_modules/moment/locale/kk.js",
	"./kk.js": "./node_modules/moment/locale/kk.js",
	"./km": "./node_modules/moment/locale/km.js",
	"./km.js": "./node_modules/moment/locale/km.js",
	"./kn": "./node_modules/moment/locale/kn.js",
	"./kn.js": "./node_modules/moment/locale/kn.js",
	"./ko": "./node_modules/moment/locale/ko.js",
	"./ko.js": "./node_modules/moment/locale/ko.js",
	"./ky": "./node_modules/moment/locale/ky.js",
	"./ky.js": "./node_modules/moment/locale/ky.js",
	"./lb": "./node_modules/moment/locale/lb.js",
	"./lb.js": "./node_modules/moment/locale/lb.js",
	"./lo": "./node_modules/moment/locale/lo.js",
	"./lo.js": "./node_modules/moment/locale/lo.js",
	"./lt": "./node_modules/moment/locale/lt.js",
	"./lt.js": "./node_modules/moment/locale/lt.js",
	"./lv": "./node_modules/moment/locale/lv.js",
	"./lv.js": "./node_modules/moment/locale/lv.js",
	"./me": "./node_modules/moment/locale/me.js",
	"./me.js": "./node_modules/moment/locale/me.js",
	"./mi": "./node_modules/moment/locale/mi.js",
	"./mi.js": "./node_modules/moment/locale/mi.js",
	"./mk": "./node_modules/moment/locale/mk.js",
	"./mk.js": "./node_modules/moment/locale/mk.js",
	"./ml": "./node_modules/moment/locale/ml.js",
	"./ml.js": "./node_modules/moment/locale/ml.js",
	"./mr": "./node_modules/moment/locale/mr.js",
	"./mr.js": "./node_modules/moment/locale/mr.js",
	"./ms": "./node_modules/moment/locale/ms.js",
	"./ms-my": "./node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/locale/ms.js",
	"./mt": "./node_modules/moment/locale/mt.js",
	"./mt.js": "./node_modules/moment/locale/mt.js",
	"./my": "./node_modules/moment/locale/my.js",
	"./my.js": "./node_modules/moment/locale/my.js",
	"./nb": "./node_modules/moment/locale/nb.js",
	"./nb.js": "./node_modules/moment/locale/nb.js",
	"./ne": "./node_modules/moment/locale/ne.js",
	"./ne.js": "./node_modules/moment/locale/ne.js",
	"./nl": "./node_modules/moment/locale/nl.js",
	"./nl-be": "./node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/locale/nl.js",
	"./nn": "./node_modules/moment/locale/nn.js",
	"./nn.js": "./node_modules/moment/locale/nn.js",
	"./pa-in": "./node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/locale/pa-in.js",
	"./pl": "./node_modules/moment/locale/pl.js",
	"./pl.js": "./node_modules/moment/locale/pl.js",
	"./pt": "./node_modules/moment/locale/pt.js",
	"./pt-br": "./node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/locale/pt.js",
	"./ro": "./node_modules/moment/locale/ro.js",
	"./ro.js": "./node_modules/moment/locale/ro.js",
	"./ru": "./node_modules/moment/locale/ru.js",
	"./ru.js": "./node_modules/moment/locale/ru.js",
	"./sd": "./node_modules/moment/locale/sd.js",
	"./sd.js": "./node_modules/moment/locale/sd.js",
	"./se": "./node_modules/moment/locale/se.js",
	"./se.js": "./node_modules/moment/locale/se.js",
	"./si": "./node_modules/moment/locale/si.js",
	"./si.js": "./node_modules/moment/locale/si.js",
	"./sk": "./node_modules/moment/locale/sk.js",
	"./sk.js": "./node_modules/moment/locale/sk.js",
	"./sl": "./node_modules/moment/locale/sl.js",
	"./sl.js": "./node_modules/moment/locale/sl.js",
	"./sq": "./node_modules/moment/locale/sq.js",
	"./sq.js": "./node_modules/moment/locale/sq.js",
	"./sr": "./node_modules/moment/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/locale/sr.js",
	"./ss": "./node_modules/moment/locale/ss.js",
	"./ss.js": "./node_modules/moment/locale/ss.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js",
	"./sw": "./node_modules/moment/locale/sw.js",
	"./sw.js": "./node_modules/moment/locale/sw.js",
	"./ta": "./node_modules/moment/locale/ta.js",
	"./ta.js": "./node_modules/moment/locale/ta.js",
	"./te": "./node_modules/moment/locale/te.js",
	"./te.js": "./node_modules/moment/locale/te.js",
	"./tet": "./node_modules/moment/locale/tet.js",
	"./tet.js": "./node_modules/moment/locale/tet.js",
	"./tg": "./node_modules/moment/locale/tg.js",
	"./tg.js": "./node_modules/moment/locale/tg.js",
	"./th": "./node_modules/moment/locale/th.js",
	"./th.js": "./node_modules/moment/locale/th.js",
	"./tl-ph": "./node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/locale/tlh.js",
	"./tr": "./node_modules/moment/locale/tr.js",
	"./tr.js": "./node_modules/moment/locale/tr.js",
	"./tzl": "./node_modules/moment/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/locale/tzl.js",
	"./tzm": "./node_modules/moment/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/locale/ug-cn.js",
	"./uk": "./node_modules/moment/locale/uk.js",
	"./uk.js": "./node_modules/moment/locale/uk.js",
	"./ur": "./node_modules/moment/locale/ur.js",
	"./ur.js": "./node_modules/moment/locale/ur.js",
	"./uz": "./node_modules/moment/locale/uz.js",
	"./uz-latn": "./node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/locale/uz.js",
	"./vi": "./node_modules/moment/locale/vi.js",
	"./vi.js": "./node_modules/moment/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/locale/yo.js",
	"./yo.js": "./node_modules/moment/locale/yo.js",
	"./zh-cn": "./node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/locale/zh-hk.js",
	"./zh-tw": "./node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/locale/zh-tw.js"
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale recursive ^\\.\\/.*$";

/***/ }),

/***/ "./src/$$_lazy_route_resource lazy recursive":
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./src/$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "./src/app/app.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config_app_config__ = __webpack_require__("./src/app/config/app.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__service_web_socket_web_service__ = __webpack_require__("./src/app/service/web/socket.web.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var AppComponent = /** @class */ (function () {
    function AppComponent(appConfig, socketWebService) {
        this.appConfig = appConfig;
        this.socketWebService = socketWebService;
        this.socketWebService.init();
    }
    AppComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'app-root',
            template: '<router-outlet></router-outlet>',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__config_app_config__["a" /* AppConfig */], __WEBPACK_IMPORTED_MODULE_2__service_web_socket_web_service__["a" /* SocketWebService */]])
    ], AppComponent);
    return AppComponent;
}());



/***/ }),

/***/ "./src/app/app.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__ = __webpack_require__("./node_modules/@angular/platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser_animations__ = __webpack_require__("./node_modules/@angular/platform-browser/esm5/animations.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_common_http__ = __webpack_require__("./node_modules/@angular/common/esm5/http.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_common__ = __webpack_require__("./node_modules/@angular/common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_forms__ = __webpack_require__("./node_modules/@angular/forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__angular_flex_layout__ = __webpack_require__("./node_modules/@angular/flex-layout/esm5/flex-layout.es5.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_angular_vertical_timeline__ = __webpack_require__("./node_modules/angular-vertical-timeline/dist/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__module_primeng_module__ = __webpack_require__("./src/app/module/primeng.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__module_material_module__ = __webpack_require__("./src/app/module/material.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__stomp_ng2_stompjs__ = __webpack_require__("./node_modules/@stomp/ng2-stompjs/@stomp/ng2-stompjs.es5.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__swimlane_ngx_datatable__ = __webpack_require__("./node_modules/@swimlane/ngx-datatable/release/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__swimlane_ngx_datatable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11__swimlane_ngx_datatable__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_amazing_time_picker__ = __webpack_require__("./node_modules/amazing-time-picker/amazing-time-picker.es5.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__service_cesium_service__ = __webpack_require__("./src/app/service/cesium.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__service_web_socket_web_service__ = __webpack_require__("./src/app/service/web/socket.web.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__service_web_client_web_service__ = __webpack_require__("./src/app/service/web/client.web.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__service_loadMapLayer_service__ = __webpack_require__("./src/app/service/loadMapLayer.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__app_component__ = __webpack_require__("./src/app/app.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__module_routing_module__ = __webpack_require__("./src/app/module/routing.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__component_operator_operator_component__ = __webpack_require__("./src/app/component/operator/operator.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__component_operator_top_bar_top_bar_component__ = __webpack_require__("./src/app/component/operator/top-bar/top-bar.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__component_operator_main_panel_main_panel_component__ = __webpack_require__("./src/app/component/operator/main-panel/main-panel.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__component_operator_top_bar_clock_clock_component__ = __webpack_require__("./src/app/component/operator/top-bar/clock/clock.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__component_operator_main_panel_map_map_component__ = __webpack_require__("./src/app/component/operator/main-panel/map/map.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__config_app_config__ = __webpack_require__("./src/app/config/app.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__config_icon_config__ = __webpack_require__("./src/app/config/icon.config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
/* Libraries */













/* Services */




/* Components */







/* Config */


var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_17__app_component__["a" /* AppComponent */],
                __WEBPACK_IMPORTED_MODULE_22__component_operator_top_bar_clock_clock_component__["a" /* ClockComponent */],
                __WEBPACK_IMPORTED_MODULE_19__component_operator_operator_component__["a" /* OperatorComponent */],
                __WEBPACK_IMPORTED_MODULE_20__component_operator_top_bar_top_bar_component__["a" /* TopBarComponent */],
                __WEBPACK_IMPORTED_MODULE_21__component_operator_main_panel_main_panel_component__["a" /* MainPanelComponent */],
                __WEBPACK_IMPORTED_MODULE_23__component_operator_main_panel_map_map_component__["a" /* AppMapComponent */],
            ],
            entryComponents: [],
            imports: [
                __WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__["BrowserModule"],
                __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser_animations__["a" /* BrowserAnimationsModule */],
                __WEBPACK_IMPORTED_MODULE_3__angular_common_http__["b" /* HttpClientModule */],
                __WEBPACK_IMPORTED_MODULE_4__angular_common__["CommonModule"],
                __WEBPACK_IMPORTED_MODULE_5__angular_forms__["FormsModule"],
                __WEBPACK_IMPORTED_MODULE_18__module_routing_module__["a" /* AppRoutingModule */],
                __WEBPACK_IMPORTED_MODULE_6__angular_flex_layout__["a" /* FlexLayoutModule */],
                __WEBPACK_IMPORTED_MODULE_7_angular_vertical_timeline__["a" /* VerticalTimelineModule */],
                __WEBPACK_IMPORTED_MODULE_8__module_primeng_module__["a" /* PrimengModule */],
                __WEBPACK_IMPORTED_MODULE_9__module_material_module__["a" /* MaterialModule */],
                __WEBPACK_IMPORTED_MODULE_11__swimlane_ngx_datatable__["NgxDatatableModule"],
                __WEBPACK_IMPORTED_MODULE_12_amazing_time_picker__["a" /* AmazingTimePickerModule */],
            ],
            providers: [
                __WEBPACK_IMPORTED_MODULE_24__config_app_config__["a" /* AppConfig */],
                __WEBPACK_IMPORTED_MODULE_25__config_icon_config__["a" /* IconConfig */],
                __WEBPACK_IMPORTED_MODULE_13__service_cesium_service__["a" /* CesiumService */],
                __WEBPACK_IMPORTED_MODULE_14__service_web_socket_web_service__["a" /* SocketWebService */],
                __WEBPACK_IMPORTED_MODULE_15__service_web_client_web_service__["a" /* ClientWebService */],
                __WEBPACK_IMPORTED_MODULE_16__service_loadMapLayer_service__["a" /* LoadMapLayerService */],
                __WEBPACK_IMPORTED_MODULE_10__stomp_ng2_stompjs__["a" /* StompRService */],
            ],
            bootstrap: [__WEBPACK_IMPORTED_MODULE_17__app_component__["a" /* AppComponent */]],
        })
    ], AppModule);
    return AppModule;
}());



/***/ }),

/***/ "./src/app/component/operator/main-panel/main-panel.component.css":
/***/ (function(module, exports) {

module.exports = "\r\n\r\n\r\n.sidebar-button-text {\r\n  -webkit-writing-mode: vertical-lr;\r\n      -ms-writing-mode: tb-lr;\r\n          writing-mode: vertical-lr;\r\n  font-family: cabin-bold;\r\n  font-size: 18px;\r\n}\r\n\r\n.bottombar-button-text {\r\n  font-family: cabin-bold;\r\n  font-size: 18px;\r\n}\r\n\r\n.rotate-180 {\r\n  -webkit-transform: rotate(180deg);\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.button-outline-highlight{\r\n  -webkit-box-shadow: 0 0 0 2pt #e74c3c;\r\n          box-shadow: 0 0 0 2pt #e74c3c;\r\n}\r\n\r\n/*---------------------------------------------\r\n    OpsLog Sidebar - Start\r\n---------------------------------------------*/\r\n\r\n#opslog-sidebar-button {\r\n  position: absolute; /* Note: Parent container must be set to 'relative' */\r\n  top: calc(50% + 1px); /* Minus half of height */\r\n  right: 0;\r\n  z-index: 10;\r\n\r\n  height: 100px !important;\r\n  width: 40px !important;\r\n  min-width: 40px !important;\r\n  padding: 0 !important;\r\n\r\n  border-top-left-radius: 10px;\r\n  border-bottom-left-radius: 10px;\r\n\r\n  background: -webkit-gradient(linear, left top, left bottom, from(#202730), to(#364046)) !important;\r\n\r\n  background: linear-gradient(#202730, #364046) !important;\r\n}\r\n\r\n.opslog-sidebar-button-close {\r\n  right: 0 !important;\r\n}\r\n\r\n.opslog-sidebar-button-open {\r\n  right: 25vw !important;\r\n}\r\n\r\n#opslog-sidebar {\r\n  /* position: absolute;\r\n  top: 0;\r\n  right: 0; */\r\n  z-index: 10;\r\n\r\n  height: 100% !important;\r\n  width: 25vw !important; /* Note: Affects #opslog-sidebar-button position in html */\r\n  margin: 0 !important;\r\n  padding: 0 !important;\r\n\r\n  background-color: rgba(20, 20, 20, 1);\r\n}\r\n\r\n/*---------------------------------------------\r\n    OpsLog Sidebar - End\r\n---------------------------------------------*/\r\n\r\n/*---------------------------------------------\r\n    Incidents Sidebar - Start\r\n---------------------------------------------*/\r\n\r\n#incidents-sidebar-button {\r\n  position: absolute; /* Note: Parent container must be set to 'relative' */\r\n  top: calc(50% - 100px - 1px); /* Minus height of button */\r\n  right: 0;\r\n  z-index: 10;\r\n\r\n  height: 100px !important;\r\n  width: 40px !important;\r\n  min-width: 40px !important;\r\n  padding: 0 !important;\r\n\r\n  border-top-left-radius: 10px;\r\n  border-bottom-left-radius: 10px;\r\n\r\n  background: -webkit-gradient(linear, left top, left bottom, from(#202730), to(#364046)) !important;\r\n\r\n  background: linear-gradient(#202730, #364046) !important;\r\n}\r\n\r\n.incidents-sidebar-button-close {\r\n  right: 0 !important;\r\n}\r\n\r\n.incidents-sidebar-button-open {\r\n  right: 25vw !important;\r\n}\r\n\r\n#incidents-sidebar {\r\n  /* position: absolute;\r\n  top: 0;\r\n  right: 0; */\r\n  z-index: 10;\r\n\r\n  height: 100% !important;\r\n  width: 25vw !important; /* Note: Affects #incidents-sidebar-button position in html */\r\n  margin: 0 !important;\r\n  padding: 0 !important;\r\n\r\n  background-color: rgba(20, 20, 20, 1);\r\n}\r\n\r\n#incidents-sidebar-header {\r\n  height: 40px;\r\n  width: 100%;\r\n  padding-left: 15px;\r\n\r\n  font-family: cabin-bold;\r\n  font-size: 20px;\r\n\r\n  border-top-right-radius: 5px;\r\n\r\n  /* background-color: rgba(36, 40, 46, 0.5); */\r\n  background: -webkit-gradient(linear, left top, left bottom, from(#202730), to(#364046)) !important;\r\n  background: linear-gradient(#202730, #364046) !important;\r\n}\r\n\r\n#incidents-sidebar-content {\r\n  height: calc(100% - 10%) !important;\r\n  width: 100% !important;\r\n\r\n  overflow: auto !important;\r\n}\r\n\r\n/*---------------------------------------------\r\n    Incidents Sidebar - End\r\n---------------------------------------------*/\r\n\r\n/*---------------------------------------------\r\n    CET Bottombar - Start\r\n---------------------------------------------*/\r\n\r\n#cet-bottombar-button {\r\n  position: absolute; /* Note: Parent container must be set to 'relative' */\r\n  /* bottom: 0; */\r\n  left: calc(50% - 50px);  /* Minus half of height */\r\n  z-index: 10;\r\n\r\n  height: 40px !important;\r\n  width: 100px !important;\r\n  padding: 0 !important;\r\n\r\n  border-top-left-radius: 10px;\r\n  border-top-right-radius: 10px;\r\n\r\n  background: -webkit-gradient(linear, left top, left bottom, from(#202730), to(#364046)) !important;\r\n\r\n  background: linear-gradient(#202730, #364046) !important;\r\n}\r\n\r\n.cet-bottombar-button-close {\r\n  bottom: 0 !important;\r\n}\r\n\r\n.cet-bottombar-button-open {\r\n  bottom: 30vh !important;\r\n}\r\n\r\n#cet-bottombar {\r\n  /* position: absolute;\r\n  bottom: 0;\r\n  left: 0; */\r\n  z-index: 10;\r\n\r\n  height: 30vh !important; /* Note: Affects #cet-bottombar-button position in html */\r\n  width: 100% !important;\r\n  margin: 0 !important;\r\n  padding: 0 !important;\r\n\r\n  background-color: rgba(20, 20, 20, 1);\r\n}\r\n\r\n.mini-circle {\r\n  border-radius: 10px;\r\n  height: 20px;\r\n  padding: 2px;\r\n}\r\n\r\n/*---------------------------------------------\r\n    CET Bottombar - End\r\n---------------------------------------------*/\r\n\r\n/*---------------------------------------------\r\n    PrimeNG Accordian Styling - Start\r\n---------------------------------------------*/\r\n\r\n:host >>> .ui-accordion {\r\n  height: calc(100% - 1px) !important;\r\n  width: 100% !important;\r\n}\r\n\r\n:host >>> .ui-accordion-header {\r\n  background-color: rgba(10, 10, 10, 0.7) !important;\r\n}\r\n\r\n:host >>> .ui-accordion-header a {\r\n  text-decoration: none !important; /* Removes underline styling */\r\n}\r\n\r\n:host >>> .ui-accordion-toggle-icon {\r\n  color: white !important;\r\n}\r\n\r\n:host >>> .ui-accordion-header-text {\r\n  font: 18px cabin-bold !important;\r\n  color: white !important;\r\n}\r\n\r\n:host >>> .ui-accordion-content {\r\n  padding: 0 !important;\r\n\r\n  color: white !important;\r\n  background-color: transparent !important;\r\n}\r\n\r\n/*---------------------------------------------\r\n  PrimeNG Accordian Styling - End\r\n---------------------------------------------*/\r\n\r\n/*---------------------------------------------\r\n  PrimeNG Notification Styling - Start\r\n---------------------------------------------*/\r\n\r\n:host >>> .ui-growl {\r\n  top: 80px;\r\n  left: calc(50% - 10em); /* Minus half of notification width */\r\n}\r\n\r\n/*---------------------------------------------\r\n  PrimeNG Notification Styling - End\r\n---------------------------------------------*/\r\n"

/***/ }),

/***/ "./src/app/component/operator/main-panel/main-panel.component.html":
/***/ (function(module, exports) {

module.exports = "<div style=\"position:relative;\" fxFlexFill fxLayout=\"row\">\r\n\r\n  <div style=\"position:relative;\" fxFlex fxLayout=\"column\">\r\n    <div style=\"position:relative;\" fxFlex>\r\n\r\n      <!-- Map -->\r\n      <app-map></app-map>\r\n    </div>\r\n\r\n  </div>\r\n\r\n</div>"

/***/ }),

/***/ "./src/app/component/operator/main-panel/main-panel.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MainPanelComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common_http__ = __webpack_require__("./node_modules/@angular/common/esm5/http.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__ = __webpack_require__("./node_modules/@angular/platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__service_cesium_service__ = __webpack_require__("./src/app/service/cesium.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__service_loadMapLayer_service__ = __webpack_require__("./src/app/service/loadMapLayer.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__service_web_socket_web_service__ = __webpack_require__("./src/app/service/web/socket.web.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_primeng_components_common_messageservice__ = __webpack_require__("./node_modules/primeng/components/common/messageservice.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_primeng_components_common_messageservice___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_primeng_components_common_messageservice__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var MainPanelComponent = /** @class */ (function () {
    function MainPanelComponent(cesiumService, bftService, http, sanitizer, socketService, messageService) {
        this.cesiumService = cesiumService;
        this.bftService = bftService;
        this.http = http;
        this.sanitizer = sanitizer;
        this.socketService = socketService;
        this.messageService = messageService;
    }
    MainPanelComponent.prototype.ngAfterViewInit = function () {
    };
    MainPanelComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'app-main-panel',
            template: __webpack_require__("./src/app/component/operator/main-panel/main-panel.component.html"),
            styles: [__webpack_require__("./src/app/component/operator/main-panel/main-panel.component.css")],
            providers: [__WEBPACK_IMPORTED_MODULE_6_primeng_components_common_messageservice__["MessageService"]],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__service_cesium_service__["a" /* CesiumService */], __WEBPACK_IMPORTED_MODULE_4__service_loadMapLayer_service__["a" /* LoadMapLayerService */],
            __WEBPACK_IMPORTED_MODULE_1__angular_common_http__["a" /* HttpClient */], __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__["DomSanitizer"],
            __WEBPACK_IMPORTED_MODULE_5__service_web_socket_web_service__["a" /* SocketWebService */], __WEBPACK_IMPORTED_MODULE_6_primeng_components_common_messageservice__["MessageService"]])
    ], MainPanelComponent);
    return MainPanelComponent;
}());



/***/ }),

/***/ "./src/app/component/operator/main-panel/map/map.component.css":
/***/ (function(module, exports) {

module.exports = ".cesium-container {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.icon-button {\r\n  -ms-flex-negative: 0;\r\n      flex-shrink: 0;\r\n  cursor: pointer;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: horizontal;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: row;\r\n          flex-direction: row;\r\n  -webkit-box-pack: center;\r\n      -ms-flex-pack: center;\r\n          justify-content: center;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n\r\n  height: 30px;\r\n  width: 30px;\r\n}\r\n\r\n.header-text {\r\n  font: 18px cabin-bold !important;\r\n}\r\n\r\n.title-text {\r\n  font: 18px cabin-bold !important;\r\n\r\n  white-space: nowrap;\r\n  overflow-x: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n/*---------------------------------------------\r\n    Layer Sidebar - Start\r\n---------------------------------------------*/\r\n\r\n/*#layer-sidebar-button {*/\r\n\r\n/*position: absolute; !* Note: Parent container must be set to 'relative' *!*/\r\n\r\n/*top: calc(50% - 50px); !* Minus half of height *!*/\r\n\r\n/*left: 0;*/\r\n\r\n/*z-index: 10;*/\r\n\r\n/*height: 100px !important;*/\r\n\r\n/*width: 40px !important;*/\r\n\r\n/*min-width: 40px !important;*/\r\n\r\n/*padding: 0 !important;*/\r\n\r\n/*border-top-right-radius: 10px;*/\r\n\r\n/*border-bottom-right-radius: 10px;*/\r\n\r\n/*background: linear-gradient(#202730, #364046) !important;*/\r\n\r\n/*}*/\r\n\r\n/*#layer-sidebar {*/\r\n\r\n/*position: absolute;*/\r\n\r\n/*top: 0;*/\r\n\r\n/*left: 0;*/\r\n\r\n/*z-index: 10;*/\r\n\r\n/*height: calc(100% - 6px) !important;*/\r\n\r\n/*width: 18vw !important; !* Note: Affects #layer-sidebar-button position in html and #main-cesium-drawing-tools-button-container *!*/\r\n\r\n/*margin: 3px 0;*/\r\n\r\n/*padding: 0 !important;*/\r\n\r\n/*border-top-right-radius: 5px;*/\r\n\r\n/*border-bottom-right-radius: 5px;*/\r\n\r\n/*background-color: rgba(20, 20, 20, 0.5);*/\r\n\r\n/*}*/\r\n\r\n/*#layer-sidebar-header {*/\r\n\r\n/*height: 40px;*/\r\n\r\n/*width: 100%;*/\r\n\r\n/*padding-left: 15px;*/\r\n\r\n/*font-family: cabin-bold;*/\r\n\r\n/*font-size: 20px;*/\r\n\r\n/*border-top-right-radius: 5px;*/\r\n\r\n/*!* background-color: rgba(36, 40, 46, 0.5); *!*/\r\n\r\n/*background: linear-gradient(#202730, #364046) !important;*/\r\n\r\n/*}*/\r\n\r\n/*#layer-sidebar-footer {*/\r\n\r\n/*position: absolute;*/\r\n\r\n/*height: 40px;*/\r\n\r\n/*width: 100%;*/\r\n\r\n/*padding-left: 10px;*/\r\n\r\n/*bottom: 0;*/\r\n\r\n/*font-family: cabin-bold;*/\r\n\r\n/*font-size: 20px;*/\r\n\r\n/*border-bottom-right-radius: 5px;*/\r\n\r\n/*!* background-color: rgba(36, 40, 46, 0.5); *!*/\r\n\r\n/*background: linear-gradient(#202730, #364046) !important;*/\r\n\r\n/*}*/\r\n\r\n#layer-sidebar-button {\r\n  position: absolute; /* Note: Parent container must be set to 'relative' */\r\n  z-index: 10;\r\n\r\n  top: 5px;\r\n  left: 5px;\r\n}\r\n\r\n/*---------------------------------------------\r\n    Drawing Tools - Start\r\n---------------------------------------------*/\r\n\r\n/*#main-cesium-drawing-tools-button-container {*/\r\n\r\n/*position: absolute;*/\r\n\r\n/*top: 0;*/\r\n\r\n/*left: 18vw; !* Note: Dependent on #layer-sidebar width *!*/\r\n\r\n/*z-index: 10;*/\r\n\r\n/*display: flex;*/\r\n\r\n/*flex-direction: row;*/\r\n\r\n/*justify-content: center;*/\r\n\r\n/*align-items: center;*/\r\n\r\n/*height: 40px;*/\r\n\r\n/*width: auto;*/\r\n\r\n/*margin: 3px;*/\r\n\r\n/*border-radius: 5px;*/\r\n\r\n/*background-color: rgba(20, 20, 20, 0.5);*/\r\n\r\n/*}*/\r\n\r\n#layer-sidebar {\r\n  position: absolute;\r\n  top: 36px;\r\n  left: 5px;\r\n  z-index: 10;\r\n\r\n  height: calc(100% - 36px - 6px) !important;\r\n  width: 18vw !important; /* Note: Affects #layer-sidebar-button position in html and #main-cesium-drawing-tools-button-container */\r\n  margin: 3px 0;\r\n  padding: 0 !important;\r\n\r\n  border-radius: 5px;\r\n\r\n  /*background-color: rgba(20, 20, 20, 0.5);*/\r\n  background-color: transparent;\r\n}\r\n\r\n#layer-sidebar-header {\r\n  height: 40px;\r\n  width: 100%;\r\n  padding-left: 15px;\r\n\r\n  font-family: cabin-bold;\r\n  font-size: 20px;\r\n\r\n  border-top-left-radius: 5px;\r\n  border-top-right-radius: 5px;\r\n\r\n   background: rgba(36, 40, 46, 0.8) !important;\r\n  /*background: linear-gradient(#202730, #364046) !important;*/\r\n}\r\n\r\n/*#layer-sidebar-content {*/\r\n\r\n/*height: calc(100% - 40px - 40px) !important;*/\r\n\r\n/*width: 100% !important;*/\r\n\r\n/*overflow: auto !important;*/\r\n\r\n/*}*/\r\n\r\n#layer-sidebar-content {\r\n  height: calc(100% - 40px) !important;\r\n  width: 100% !important;\r\n\r\n  overflow: auto !important;\r\n}\r\n\r\n.layers-container {\r\n  height: auto !important;\r\n  max-height: calc(36px * 10) !important; /* Note: Shows max 10 layers */\r\n  width: 100% !important;\r\n\r\n  overflow: auto !important;\r\n\r\n  /*background-color: rgba(20, 20, 20, 0.5);*/\r\n}\r\n\r\n.layer-container-header {\r\n  background-color: rgba(20, 20, 20, 0.7) !important;\r\n}\r\n\r\n.layer-container {\r\n  -ms-flex-negative: 0;\r\n      flex-shrink: 0;\r\n\r\n  height: 36px;\r\n  width: 100%;\r\n  padding-left: 10px;\r\n\r\n  background-color: rgba(20, 20, 20, 0.6);\r\n}\r\n\r\n.checkbox {\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  -webkit-box-pack: center;\r\n      -ms-flex-pack: center;\r\n          justify-content: center;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n}\r\n\r\n/*---------------------------------------------\r\n    Layer Sidebar - End\r\n---------------------------------------------*/\r\n\r\n#main-cesium-drawing-tools-button-container {\r\n  position: absolute;\r\n  top: 36px;\r\n  left: calc(18vw + 3px); /* Note: Dependent on #layer-sidebar width */\r\n  z-index: 10;\r\n\r\n  display: -webkit-box;\r\n\r\n  display: -ms-flexbox;\r\n\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  -webkit-box-pack: center;\r\n      -ms-flex-pack: center;\r\n          justify-content: center;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n\r\n  height: auto;\r\n  width: 40px;\r\n  margin: 3px;\r\n  padding: 2px 0;\r\n\r\n  border-radius: 5px;\r\n\r\n  background-color: rgba(20, 20, 20, 0.6);\r\n}\r\n\r\n.drawing-tool-button {\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  -webkit-box-pack: center;\r\n      -ms-flex-pack: center;\r\n          justify-content: center;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n  outline: unset;\r\n}\r\n\r\n.drawing-tool-button-active {\r\n  outline: 1px solid red !important;\r\n  background-color: rgba(255, 00, 00, 0.3) !important;\r\n}\r\n\r\n/*---------------------------------------------\r\n    Drawing Tools - End\r\n---------------------------------------------*/\r\n\r\n/*---------------------------------------------\r\n    Dialog - Start\r\n---------------------------------------------*/\r\n\r\n.dialog-duplicate-error {\r\n  font: 20px cabin-bold;\r\n  color: red;\r\n}\r\n\r\n.uploaded-content-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: auto;\r\n}\r\n\r\n.uploaded-content-item-container {\r\n  position: relative;\r\n  height: 125px;\r\n  width: auto;\r\n  padding: 2px;\r\n}\r\n\r\n.uploaded-content-item-icon-button {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n\r\n  height: 20px;\r\n  width: 20px;\r\n}\r\n\r\n.context-menu-label {\r\n  font: 15px cabin-bold;\r\n  color: navy;\r\n\r\n  vertical-align: top;\r\n}\r\n\r\n.context-menu-content {\r\n  font: 15px cabin-bold;\r\n\r\n  vertical-align: top;\r\n}\r\n\r\n.dialog-icon-button {\r\n  -ms-flex-negative: 0;\r\n      flex-shrink: 0;\r\n  cursor: pointer;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: horizontal;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: row;\r\n          flex-direction: row;\r\n  -webkit-box-pack: center;\r\n      -ms-flex-pack: center;\r\n          justify-content: center;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n\r\n  border: none !important;\r\n  outline: none !important;\r\n  background-color: transparent !important;\r\n\r\n  height: 30px;\r\n  width: 30px;\r\n}\r\n\r\n/*---------------------------------------------\r\n    Dialog - End\r\n---------------------------------------------*/\r\n"

/***/ }),

/***/ "./src/app/component/operator/main-panel/map/map.component.html":
/***/ (function(module, exports) {

module.exports = "<div id=\"{{cesiumMapContainerId}}\" class=\"cesium-container\" fxFlex>\r\n  <!-- Layer Sidebar -->\r\n  <button id=\"layer-sidebar-button\" class=\"cesium-button cesium-toolbar-button icon-button\" (click)=\"toggleLayerSidebarVisibility()\"\r\n    [ngClass]=\"{'button-outline-highlight': isOverlayManagerVisible}\" matTooltip=\"Layer Management\" matTooltipPosition=\"right\">\r\n    <img src=\"assets/icons/solid/layers.svg\" height=\"20px\" width=\"20px\">\r\n  </button>\r\n\r\n  <!-- Overlay Manager -->\r\n  <div id=\"layer-sidebar\" *ngIf=\"cesiumViewer\" [ngStyle]=\"{'display': (isOverlayManagerVisible) ? 'initial' : 'none'}\">\r\n    <!-- Header -->\r\n    <div id=\"layer-sidebar-header\" fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n      <span>Map Layers</span>\r\n      <span fxFlex></span>\r\n      <button class=\"cesium-button cesium-toolbar-button icon-button\" (click)=\"saveCanvasAsImage()\" matTooltip=\"Save View as PNG\"\r\n        matTooltipPosition=\"right\">\r\n        <img src=\"assets/icons/solid/png-file-format-symbol.svg\" height=\"20px;\" width=\"20px;\">\r\n      </button>\r\n      <button class=\"cesium-button cesium-toolbar-button icon-button\" (click)=\"importDataSourceFromGeoJson()\" matTooltip=\"Import Layer\"\r\n        matTooltipPosition=\"right\">\r\n        <img src=\"assets/icons/solid/import-alt-a.svg\" height=\"20px;\" width=\"20px;\">\r\n      </button>\r\n      <input id=\"file-layer-upload\" type=\"file\" (click)=\"resetFileUploadElement($event)\" (change)=\"handleFileLayerUpload($event)\"\r\n        style=\"display:none\">\r\n      <button class=\"cesium-button cesium-toolbar-button icon-button\" (click)=\"addDataSource()\" matTooltip=\"Add Personal Layer\"\r\n        matTooltipPosition=\"right\">\r\n        <img src=\"assets/icons/solid/plus-white.svg\" height=\"20px\" width=\"20px\">\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Content -->\r\n    <div id=\"layer-sidebar-content\" *ngIf=\"cesiumViewer && cesiumViewer.dataSources\">\r\n      <p-accordion [multiple]=\"true\">\r\n        <!-- Personal Layers -->\r\n        <p-accordionTab header=\"Personal Layers ({{cesiumDataSources.length}})\" [selected]=\"true\">\r\n          <div class=\"layer-container layer-container-header\" fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n            <span class=\"header-text\" matTooltip=\"Current Active Layer\" matTooltipPosition=\"right\">\r\n              Active: {{activeDataSource.name}}\r\n            </span>\r\n          </div>\r\n\r\n          <div class=\"layer-container layer-container-header\" *ngIf=\"cesiumDataSources && cesiumDataSources.length > 1\" fxLayout=\"row\"\r\n            fxLayoutAlign=\"start center\">\r\n            <p-checkbox #selectAllCheckbox class=\"title-text checkbox\" name=\"datasource-group\" binary=\"true\" (onChange)=\"toggleSelectAll(selectAllCheckbox, cesiumDataSources)\"></p-checkbox>\r\n            <span class=\"title-text\" fxFlex>Select All</span>\r\n\r\n            <div fxLayout=\"row\" fxLayoutAlign=\"end center\">\r\n              <!-- Toggle All Labels -->\r\n              <button class=\"cesium-button cesium-toolbar-button icon-button\" *ngIf=\"atLeastMoreThanOneDataSourcesHaveLabels(cesiumDataSources)\"\r\n                (click)=\"toggleAllLabels(cesiumDataSources, 'personal');\">\r\n                <img *ngIf=\"isCesiumPersonalDataSourcesLabelsVisible\" src=\"assets/icons/solid/eye-white.svg\" matTooltip=\"Hide All Labels\"\r\n                  matTooltipPosition=\"right\" height=\"20px;\" width=\"20px;\">\r\n                <img *ngIf=\"!isCesiumPersonalDataSourcesLabelsVisible\" src=\"assets/icons/solid/eye-slash-white.svg\" matTooltip=\"Show All Labels\"\r\n                  matTooltipPosition=\"right\" height=\"20px;\" width=\"20px;\">\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"layers-container\">\r\n            <div [ngClass]=\"{'datasource-active': activeDataSource === dataSource, 'datasource-highlight': activeDataSource !== dataSource}\"\r\n              class=\"layer-container\" *ngFor=\"let dataSource of cesiumDataSources\" (click)=\"updateActiveDataSource(dataSource);\"\r\n              fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n\r\n              <p-checkbox class=\"title-text checkbox\" name=\"datasource-group\" binary=\"true\" [(ngModel)]=\"dataSource.show\"></p-checkbox>\r\n              <span class=\"title-text\" fxFlex (click)=\"updateActiveDataSource(dataSource);\" matTooltip=\"{{dataSource.name}}\" matTooltipPosition=\"right\">{{dataSource.name}}</span>\r\n\r\n              <div fxLayout=\"row\" fxLayoutAlign=\"end center\">\r\n                <!-- Toggle Labels -->\r\n                <button class=\"cesium-button cesium-toolbar-button icon-button\" *ngIf=\"dataSource.entities && dataSource.entities.values.length > 0 && dataSource.entities.values[0].label\"\r\n                  (click)=\"toggleLabels(dataSource);\">\r\n                  <img *ngIf=\"dataSource.entities.values[0].label.show._value\" src=\"assets/icons/solid/eye-white.svg\" matTooltip=\"Hide Labels\"\r\n                    matTooltipPosition=\"right\" height=\"20px;\" width=\"20px;\">\r\n                  <img *ngIf=\"!dataSource.entities.values[0].label.show._value\" src=\"assets/icons/solid/eye-slash-white.svg\" matTooltip=\"Show Labels\"\r\n                    matTooltipPosition=\"right\" height=\"20px;\" width=\"20px;\">\r\n                </button>\r\n                <!-- Edit Layer Name -->\r\n                <button class=\"cesium-button cesium-toolbar-button icon-button\" (click)=\"showEditDataSourceNameDialog(dataSource);\" matTooltip=\"Edit Layer Name\"\r\n                  matTooltipPosition=\"right\">\r\n                  <img src=\"assets/icons/regular/edit-white.svg\" height=\"20px;\" width=\"20px;\">\r\n                </button>\r\n                <!-- Export Layer As GeoJson -->\r\n                <button class=\"cesium-button cesium-toolbar-button icon-button\" (click)=\"exportDataSourceAsGeoJson(dataSource)\" matTooltip=\"Export Layer\"\r\n                  matTooltipPosition=\"right\">\r\n                  <img src=\"assets/icons/solid/export.svg\" height=\"17px;\" width=\"17px;\">\r\n                </button>\r\n                <!-- Publish Layer -->\r\n                <button class=\"cesium-button cesium-toolbar-button icon-button\" (click)=\"publishDataSource(dataSource)\" matTooltip=\"Publish Layer\"\r\n                  matTooltipPosition=\"right\">\r\n                  <img src=\"assets/icons/solid/share-alt-white.svg\" height=\"17px;\" width=\"17px;\">\r\n                </button>\r\n                <!-- Remove Layer -->\r\n                <button class=\"cesium-button cesium-toolbar-button icon-button\" *ngIf=\"cesiumDataSources.length > 1\" (click)=\"removeDataSource(dataSource);\"\r\n                  matTooltip=\"Remove Layer\" matTooltipPosition=\"right\">\r\n                  <img src=\"assets/icons/solid/trash-alt-white.svg\" height=\"20px;\" width=\"20px;\">\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </p-accordionTab>\r\n\r\n\r\n        <!-- Static Layers -->\r\n        <p-accordionTab header=\"Static Layers ({{cesiumStaticDataSources.length}})\" [selected]=\"(cesiumStaticDataSources.length > 0)\">\r\n          <div class=\"layer-container layer-container-header\" *ngIf=\"cesiumStaticDataSources && cesiumStaticDataSources.length > 1\"\r\n            fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n            <p-checkbox #selectAllCheckbox class=\"title-text checkbox\" name=\"static-datasource-group\" binary=\"true\" (onChange)=\"toggleSelectAll(selectAllCheckbox, cesiumStaticDataSources)\"></p-checkbox>\r\n            <span class=\"title-text\" fxFlex>Select All</span>\r\n\r\n            <div fxLayout=\"row\" fxLayoutAlign=\"end center\">\r\n              <!-- Toggle All Labels -->\r\n              <button class=\"cesium-button cesium-toolbar-button icon-button\" *ngIf=\"atLeastMoreThanOneDataSourcesHaveLabels(cesiumStaticDataSources)\"\r\n                (click)=\"toggleAllLabels(cesiumStaticDataSources, 'static');\">\r\n                <img *ngIf=\"isCesiumStaticDataSourcesLabelsVisible\" src=\"assets/icons/solid/eye-white.svg\" matTooltip=\"Hide All Labels\" matTooltipPosition=\"right\"\r\n                  height=\"20px;\" width=\"20px;\">\r\n                <img *ngIf=\"!isCesiumStaticDataSourcesLabelsVisible\" src=\"assets/icons/solid/eye-slash-white.svg\" matTooltip=\"Show All Labels\"\r\n                  matTooltipPosition=\"right\" height=\"20px;\" width=\"20px;\">\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"layers-container\">\r\n            <div class=\"layer-container\" *ngFor=\"let dataSource of cesiumStaticDataSources\" fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n              <p-checkbox class=\"title-text checkbox\" name=\"static-datasource-group\" binary=\"true\" [(ngModel)]=\"dataSource.show\"></p-checkbox>\r\n              <span class=\"title-text\" fxFlex matTooltip=\"{{dataSource.name}}\" matTooltipPosition=\"right\">{{dataSource.name}}</span>\r\n\r\n              <div fxLayout=\"row\" fxLayoutAlign=\"end center\">\r\n                <!-- Toggle Labels -->\r\n                <button class=\"cesium-button cesium-toolbar-button icon-button\" *ngIf=\"dataSource.entities && dataSource.entities.values.length > 0 && dataSource.entities.values[0].label\"\r\n                  (click)=\"toggleLabels(dataSource);\">\r\n                  <img *ngIf=\"dataSource.entities.values[0].label.show._value\" src=\"assets/icons/solid/eye-white.svg\" matTooltip=\"Hide Labels\"\r\n                    matTooltipPosition=\"right\" height=\"20px;\" width=\"20px;\">\r\n                  <img *ngIf=\"!dataSource.entities.values[0].label.show._value\" src=\"assets/icons/solid/eye-slash-white.svg\" matTooltip=\"Show Labels\"\r\n                    matTooltipPosition=\"right\" height=\"20px;\" width=\"20px;\">\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </p-accordionTab>\r\n\r\n        <!-- Dynamic Layers -->\r\n        <p-accordionTab header=\"Dynamic Layers ({{cesiumDynamicDataSources.length}})\" [selected]=\"(cesiumDynamicDataSources.length > 0)\">\r\n          <div class=\"layer-container layer-container-header\" *ngIf=\"cesiumDynamicDataSources && cesiumDynamicDataSources.length > 1\"\r\n            fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n            <p-checkbox #selectAllCheckbox class=\"title-text checkbox\" name=\"dynamic-datasource-group\" binary=\"true\" (onChange)=\"toggleSelectAll(selectAllCheckbox, cesiumDynamicDataSources)\"></p-checkbox>\r\n            <span class=\"title-text\" fxFlex>Select All</span>\r\n\r\n            <div fxLayout=\"row\" fxLayoutAlign=\"end center\">\r\n              <!-- Toggle All Labels -->\r\n              <button class=\"cesium-button cesium-toolbar-button icon-button\" *ngIf=\"atLeastMoreThanOneDataSourcesHaveLabels(cesiumDynamicDataSources)\"\r\n                (click)=\"toggleAllLabels(cesiumDynamicDataSources, 'dynamic');\">\r\n                <img *ngIf=\"isCesiumDynamicDataSourcesLabelsVisible\" src=\"assets/icons/solid/eye-white.svg\" matTooltip=\"Hide All Labels\"\r\n                  matTooltipPosition=\"right\" height=\"20px;\" width=\"20px;\">\r\n                <img *ngIf=\"!isCesiumDynamicDataSourcesLabelsVisible\" src=\"assets/icons/solid/eye-slash-white.svg\" matTooltip=\"Show All Labels\"\r\n                  matTooltipPosition=\"right\" height=\"20px;\" width=\"20px;\">\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"layers-container\">\r\n            <div class=\"layer-container\" *ngFor=\"let dataSource of cesiumDynamicDataSources\" fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n              <p-checkbox class=\"title-text checkbox\" name=\"dynamic-datasource-group\" binary=\"true\" [(ngModel)]=\"dataSource.show\"></p-checkbox>\r\n              <span class=\"title-text\" fxFlex matTooltip=\"{{dataSource.name}}\" matTooltipPosition=\"right\">{{dataSource.name}}</span>\r\n\r\n              <div fxLayout=\"row\" fxLayoutAlign=\"end center\">\r\n                <!-- Toggle Labels -->\r\n                <button class=\"cesium-button cesium-toolbar-button icon-button\" *ngIf=\"dataSource.entities && dataSource.entities.values.length > 0 && dataSource.entities.values[0].label\"\r\n                  (click)=\"toggleLabels(dataSource);\">\r\n                  <img *ngIf=\"dataSource.entities.values[0].label.show._value\" src=\"assets/icons/solid/eye-white.svg\" matTooltip=\"Hide Labels\"\r\n                    matTooltipPosition=\"right\" height=\"20px;\" width=\"20px;\">\r\n                  <img *ngIf=\"!dataSource.entities.values[0].label.show._value\" src=\"assets/icons/solid/eye-slash-white.svg\" matTooltip=\"Show Labels\"\r\n                    matTooltipPosition=\"right\" height=\"20px;\" width=\"20px;\">\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </p-accordionTab>\r\n      </p-accordion>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Cesium Drawing Tools -->\r\n  <div id=\"main-cesium-drawing-tools-button-container\" [ngStyle]=\"{'display': (isOverlayManagerVisible) ? 'flex' : 'none'}\">\r\n    <div *ngFor=\"let drawingTool of cesiumDrawingToolsProperties.drawingTools\">\r\n      <button id=\"{{drawingTool.id}}\" [ngClass]=\"{'drawing-tool-button-active': drawingTool.isActivated === true}\" class=\"drawing-tool-button cesium-button cesium-toolbar-button\">\r\n        <img src=\"{{drawingTool.iconUrl}}\" height=\"20px\" width=\"20px\">\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Dialog - Edit Layer Name -->\r\n  <p-dialog appendTo=\"body\" header=\"Edit Layer Name\" [(visible)]=\"displayEditDataSourceDialog\" width=\"400\" [responsive]=\"true\"\r\n    modal=\"modal\">\r\n    <input id=\"dialog-edit-datasource-name-input\" type=\"text\" class=\"title-text\" style=\"width:100%;\" value=\"{{editableDataSourceName}}\"\r\n      (input)=\"validateEditableDataSourceName($event)\" (keyup)=\"clickSaveEditableDataSourceNameButton($event)\">\r\n    <div *ngIf=\"hasDuplicateDataSourceName\" class=\"dialog-duplicate-error\">Layer name already exist!\r\n    </div>\r\n    <p-footer>\r\n      <button id=\"dialog-save-datasource-name-button\" class=\"toolbar-button cesium-button\" [disabled]=\"hasDuplicateDataSourceName || isInvalidDataSourceName\"\r\n        (click)=\"saveEditableDataSourceName(editableDataSource);displayEditDataSourceDialog=false;\">\r\n        <span class=\"title-text\">Save</span>\r\n      </button>\r\n    </p-footer>\r\n  </p-dialog>\r\n\r\n  <!-- Dialog - Picked Editable Entity -->\r\n  <p-dialog appendTo=\"body\" *ngIf=\"cesiumDrawingToolsProperties.pickedEntity && cesiumDrawingToolsProperties.pickedEntityEditable &&\r\n            (!cesiumDrawingToolsProperties.pickedEntity.displayEntityVideoDialog && cesiumDrawingToolsProperties.displayEntityDetailsDialog)\r\n            && cesiumDrawingToolsProperties.pickedEntity.label\"\r\n    [(visible)]=\"cesiumDrawingToolsProperties.displayEntityDetailsDialog\" positionTop=\"{{cesiumDrawingToolsProperties.displayEntityDetailsDialog_yPos}}\"\r\n    positionLeft=\"{{cesiumDrawingToolsProperties.displayEntityDetailsDialog_xPos}}\" width=\"300\">\r\n    <p-header fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n      <input type=\"text\" class=\"title-text\" style=\"width:100%;\" value=\"{{cesiumDrawingToolsProperties.pickedEntity.name}}\" [(ngModel)]=\"cesiumDrawingToolsProperties.pickedEntity.label.text\"\r\n        [(ngModel)]=\"cesiumDrawingToolsProperties.pickedEntity.name\">\r\n    </p-header>\r\n\r\n    <!-- Content -->\r\n    <div class=\"uploaded-content-container\" *ngIf=\"cesiumDrawingToolsProperties.pickedEntity.customProperties.uploadedContentList !== null\"\r\n      fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n      <input id=\"file-upload\" type=\"file\" (click)=\"resetFileUploadElement($event)\" (change)=\"handleFileUploadToEntity($event, cesiumDrawingToolsProperties.pickedEntity)\"\r\n        style=\"display:none\" accept=\"video/*,image/*\" multiple>\r\n      <div class=\"uploaded-content-item-container\" *ngFor=\"let uploadedContent of cesiumDrawingToolsProperties.pickedEntity.customProperties.uploadedContentList\"\r\n        fxLayout=\"column\" fxLayoutAlign=\"center center\">\r\n        <img *ngIf=\"uploadedContent !== null && uploadedContent.fileType === 'image';\" [src]=\"uploadedContent.fileURL\" style=\"height:100%;width:auto;\">\r\n        <video *ngIf=\"uploadedContent !== null && uploadedContent.fileType === 'video';\" controls height=\"100%\">\r\n          <source *ngIf=\"uploadedContent.fileExtension === 'webm'\" type=\"video/webm\" [src]=\"uploadedContent.fileURL\">\r\n          <source *ngIf=\"uploadedContent.fileExtension === 'mp4'\" type=\"video/mp4\" [src]=\"uploadedContent.fileURL\">\r\n        </video>\r\n        <button *ngIf=\"uploadedContent !== null\" class=\"cesium-button cesium-toolbar-button uploaded-content-item-icon-button\" (click)=\"removeFileUploadFromEntity(uploadedContent, cesiumDrawingToolsProperties.pickedEntity)\"\r\n          fxLayout=\"row\" fxLayoutAlign=\"center center\">\r\n          <img src=\"assets/icons/solid/cancel-white.svg\" height=\"12px;\" width=\"12px;\">\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <p-footer>\r\n      <div fxLayout=\"row\">\r\n        <p-colorPicker [(ngModel)]=\"cesiumDrawingToolsProperties.selectedColor\" (onChange)=\"updateEntityColor();\" matTooltip=\"Color\"\r\n          matTooltipPosition=\"below\"></p-colorPicker>\r\n\r\n        <button class=\"cesium-button cesium-toolbar-button icon-button\" *ngFor=\"let action of cesiumDrawingToolsProperties.displayEntityDetailsActions\"\r\n          (click)=\"action.function($event, overlayPanel, action)\" matTooltip=\"{{action.title}}\" matTooltipPosition=\"below\">\r\n          <img src=\"{{action.iconUrl}}\" height=\"20px;\" width=\"20px;\">\r\n        </button>\r\n\r\n        <p-overlayPanel appendTo=\"body\" #overlayPanel>\r\n          <div *ngIf=\"cesiumDrawingToolsProperties.pickedEntity.billboard\">\r\n            <div class=\"title-text\">Available icons:</div>\r\n            <div id=\"icon-container\" fxLayout=\"row\">\r\n              <button class=\"cesium-button cesium-toolbar-button icon-button\" *ngFor=\"let icon of markerIcons\" (click)=\"updateEntityIcon(icon);\">\r\n                <img src=\"{{icon.iconUrl}}\" height=\"20px;\" width=\"20px;\">\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div *ngIf=\"cesiumDrawingToolsProperties.pickedEntity.polyline\">\r\n            <div class=\"title-text\">Line width: {{cesiumDrawingToolsProperties.pickedEntity.polyline.width}}\r\n            </div>\r\n            <p-slider [(ngModel)]=\"cesiumDrawingToolsProperties.pickedEntity.polyline.width\" [style]=\"{'width':'200px'}\" [min]=\"1\" [max]=\"30\"></p-slider>\r\n          </div>\r\n\r\n          <div *ngIf=\"cesiumDrawingToolsProperties.pickedEntity.polygon || cesiumDrawingToolsProperties.pickedEntity.ellipse\">\r\n            <div class=\"title-text\">Transparency [1 - 10]: {{cesiumDrawingToolsProperties.selectedColorAlpha}}\r\n            </div>\r\n            <p-slider [(ngModel)]=\"cesiumDrawingToolsProperties.selectedColorAlpha\" [style]=\"{'width':'200px'}\" [min]=\"1\" [max]=\"10\"\r\n              (onChange)=\"updateEntityColor();\"></p-slider>\r\n          </div>\r\n        </p-overlayPanel>\r\n      </div>\r\n    </p-footer>\r\n  </p-dialog>\r\n\r\n  <!-- Dialog - Non Editable Entity -->\r\n  <p-dialog appendTo=\"body\" *ngIf=\"cesiumDrawingToolsProperties.pickedEntity && !cesiumDrawingToolsProperties.pickedEntityEditable\"\r\n    [(visible)]=\"cesiumDrawingToolsProperties.displayEntityDetailsDialog\" [positionTop]=\"cesiumDrawingToolsProperties.displayEntityDetailsDialog_yPos\"\r\n    [positionLeft]=\"cesiumDrawingToolsProperties.displayEntityDetailsDialog_xPos\" width=\"300\" [draggable]=\"true\" [resizable]=\"true\">\r\n    <p-header fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n      {{cesiumDrawingToolsProperties.pickedEntity.type}}\r\n    </p-header>\r\n\r\n    <!-- Content -->\r\n    <table>\r\n      <tr *ngFor=\"let data of cesiumDrawingToolsProperties.pickedEntity.data\">\r\n        <td class=\"context-menu-label\">{{data.label}}</td>\r\n        <td class=\"context-menu-content\">{{data.content || 'NA'}}</td>\r\n      </tr>\r\n    </table>\r\n  </p-dialog>\r\n\r\n  <div id=\"{{cesiumCreditContainerId}}\" style=\"display:none\"></div>\r\n</div>"

/***/ }),

/***/ "./src/app/component/operator/main-panel/map/map.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppMapComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common_http__ = __webpack_require__("./node_modules/@angular/common/esm5/http.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__ = __webpack_require__("./node_modules/@angular/platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__service_cesium_service__ = __webpack_require__("./src/app/service/cesium.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__service_loadMapLayer_service__ = __webpack_require__("./src/app/service/loadMapLayer.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__service_web_socket_web_service__ = __webpack_require__("./src/app/service/web/socket.web.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_primeng_components_common_messageservice__ = __webpack_require__("./node_modules/primeng/components/common/messageservice.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_primeng_components_common_messageservice___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_primeng_components_common_messageservice__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var AppMapComponent = /** @class */ (function () {
    function AppMapComponent(cesiumService, loadMapLayerService, http, sanitizer, socketService, messageService) {
        this.cesiumService = cesiumService;
        this.loadMapLayerService = loadMapLayerService;
        this.http = http;
        this.sanitizer = sanitizer;
        this.socketService = socketService;
        this.messageService = messageService;
        this.cesiumMapContainerId = 'main-cesium-container';
        this.cesiumCreditContainerId = 'main-cesium-credit-container';
        this.cesiumDrawingToolsContainerId = 'main-cesium-drawing-tools-button-container';
        this.cesiumDrawingToolsProperties = {
            activeDataSource: null,
            totalEntityCount: 0,
            pickedEntity: null,
            pickedCCTVs: [],
            pickedEntityEditable: true,
            selectedIcon: '',
            selectedColor: '',
            selectedAlpha: 10,
            displayEntityDetailsDialog: false,
            displayEntityDetailsActions: [],
            displayEntityDetailsDialog_xPos: 0,
            displayEntityDetailsDialog_yPos: 0,
            drawingToolsHandler: null,
            drawingTools: [
                {
                    id: 'main-draw-marker',
                    type: 'draw-marker',
                    isActivated: false,
                    iconUrl: 'assets/icons/solid/map-marker-alt-white.svg',
                },
                {
                    id: 'main-draw-polyline',
                    type: 'draw-polyline',
                    isActivated: false,
                    iconUrl: 'assets/icons/solid/map-polyline-white.svg',
                },
                {
                    id: 'main-draw-polygon',
                    type: 'draw-polygon',
                    isActivated: false,
                    iconUrl: 'assets/icons/solid/map-polygon-white.svg',
                },
                {
                    id: 'main-draw-circle',
                    type: 'draw-circle',
                    isActivated: false,
                    iconUrl: 'assets/icons/solid/map-circle-white.svg',
                },
                {
                    id: 'main-draw-scribble',
                    type: 'draw-scribble',
                    isActivated: false,
                    iconUrl: 'assets/icons/solid/map-scribble-white.svg',
                },
            ],
        };
        this.isOverlayManagerVisible = false;
        // Personal Layers
        this.cesiumDataSourceCount = 0;
        this.cesiumDataSources = []; // cesiumViewer.dataSources is not an iterable object. Therefore have to
        // cesiumPublishedDataSources = []; // Published Layers
        // cesiumIncidentDataSources = []; // Incident Layers
        this.cesiumStaticDataSources = []; // Static Layers
        this.cesiumDynamicDataSources = []; // Dynamic Layers
        this.isCesiumPersonalDataSourcesLabelsVisible = true;
        // isCesiumIncidentDataSourcesLabelsVisible = true;
        // isCesiumPublishedDataSourcesLabelsVisible = true;
        this.isCesiumStaticDataSourcesLabelsVisible = true;
        this.isCesiumDynamicDataSourcesLabelsVisible = true;
        this.displayEditDataSourceDialog = false;
        this.hasDuplicateDataSourceName = false;
        this.isInvalidDataSourceName = false;
        this.markerIcons = [
            { iconUrl: 'assets/markers/marker-white.png' },
            { iconUrl: 'assets/markers/custom/army.png' },
            { iconUrl: 'assets/markers/custom/joint.png' },
            { iconUrl: 'assets/markers/custom/police.png' },
            { iconUrl: 'assets/markers/custom/police-2.png' },
            { iconUrl: 'assets/markers/custom/police-car.png' },
            { iconUrl: 'assets/markers/custom/ambulance.png' },
            { iconUrl: 'assets/markers/custom/fire-truck.png' },
            { iconUrl: 'assets/markers/custom/hospital.png' },
            { iconUrl: 'assets/markers/custom/medical-kit.png' },
            { iconUrl: 'assets/markers/custom/accident.png' },
            { iconUrl: 'assets/markers/custom/roadblock.png' },
            { iconUrl: 'assets/markers/custom/attention.png' },
            { iconUrl: 'assets/markers/custom/stop.png' },
            { iconUrl: 'assets/markers/custom/gun.png' },
            { iconUrl: 'assets/markers/custom/shooter.png' },
            { iconUrl: 'assets/markers/custom/terrorist.png' },
        ];
    }
    AppMapComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        if (!this.cesiumViewer && document.getElementById(this.cesiumMapContainerId)) {
            setTimeout(function () {
                _this.cesiumViewer =
                    _this.cesiumService.initCesiumViewer(_this.cesiumMapContainerId, _this.cesiumCreditContainerId);
                // TODO: Create 'datasource-data-service' and get datasources (Personal & Published) from backend
                _this.addDataSourceAndSetAsActive(); // Note: 'this.activeDataSource' is updated in method
                _this.cesiumService.initCesiumDrawingTools(_this.cesiumViewer, _this.cesiumDrawingToolsContainerId, _this.cesiumDrawingToolsProperties);
                // this.initPublishedDataSources();
                _this.initStaticDataSources(); // Initialise static datasources // TODO: Might put in 'cesium.service' so all
                // components tt uses the service can load static datasources
                _this.initDynamicDataSources(); // Initialise dynamic datasources
            }, 100); // Delay by 0.1 seconds
        }
    };
    AppMapComponent.prototype.toggleLayerSidebarVisibility = function () {
        this.isOverlayManagerVisible = !this.isOverlayManagerVisible;
        if (!this.isOverlayManagerVisible) {
            this.cesiumService.resetDrawingToolsButtons(this.cesiumDrawingToolsProperties, null);
        }
        // console.log("toggleLayerSidebarVisibility", this.isOverlayManagerVisible);
    };
    AppMapComponent.prototype.toggleSelectAll = function (selectAllCheckbox, dataSources) {
        for (var i = 0; i < dataSources.length; i += 1) {
            var dataSource = dataSources[i];
            dataSource.show = selectAllCheckbox.checked;
        }
    };
    AppMapComponent.prototype.toggleLabels = function (dataSource) {
        for (var i = 0; i < dataSource.entities.values.length; i += 1) {
            var entity = dataSource.entities.values[i];
            entity.label.show = !entity.label.show._value;
        }
    };
    AppMapComponent.prototype.toggleAllLabels = function (dataSources, layerType) {
        var isVisible = false;
        if (layerType === 'personal') {
            this.isCesiumPersonalDataSourcesLabelsVisible = !this.isCesiumPersonalDataSourcesLabelsVisible;
            isVisible = this.isCesiumPersonalDataSourcesLabelsVisible;
            // } else if (layerType === 'incident') {
            //   this.isCesiumIncidentDataSourcesLabelsVisible = !this.isCesiumIncidentDataSourcesLabelsVisible;
            //   isVisible = this.isCesiumIncidentDataSourcesLabelsVisible;
            // } else if (layerType === 'published') {
            //   this.isCesiumPublishedDataSourcesLabelsVisible = !this.isCesiumPublishedDataSourcesLabelsVisible;
            //   isVisible = this.isCesiumPublishedDataSourcesLabelsVisible;
        }
        else if (layerType === 'static') {
            this.isCesiumStaticDataSourcesLabelsVisible = !this.isCesiumStaticDataSourcesLabelsVisible;
            isVisible = this.isCesiumStaticDataSourcesLabelsVisible;
        }
        else if (layerType === 'dynamic') {
            this.isCesiumDynamicDataSourcesLabelsVisible = !this.isCesiumDynamicDataSourcesLabelsVisible;
            isVisible = this.isCesiumDynamicDataSourcesLabelsVisible;
        }
        for (var i = 0; i < dataSources.length; i += 1) {
            var dataSource = dataSources[i];
            // Note: Not all dataSources and their entities have labels
            if (dataSource.entities && dataSource.entities.values.length > 0 && dataSource.entities.values[0].label) {
                for (var j = 0; j < dataSource.entities.values.length; j += 1) {
                    var entity = dataSource.entities.values[j];
                    entity.label.show = isVisible; // Toggle labels based on 'isVisible'
                }
            }
        }
    };
    AppMapComponent.prototype.atLeastMoreThanOneDataSourcesHaveLabels = function (dataSources) {
        // Only show the 'Toggle All Labels' button when there are more than 1 datasources with labels
        var dataSourceWithLabelsCount = 0;
        for (var i = 0; i < dataSources.length; i += 1) {
            var dataSource = dataSources[i];
            // Note: Not all dataSources and their entities have labels
            if (dataSource.entities && dataSource.entities.values.length > 0 && dataSource.entities.values[0].label) {
                dataSourceWithLabelsCount += 1;
            }
            if (dataSourceWithLabelsCount > 1) {
                return true;
            }
        }
        return false;
    };
    AppMapComponent.prototype.addDataSource = function (layerName) {
        // 1. Initialise dataSource name and create dataSource
        var newLayerCount = this.cesiumDataSourceCount + 1;
        var newDataSourceName = 'Layer ' + newLayerCount;
        if (layerName) {
            newDataSourceName = layerName;
        }
        var dataSource = this.cesiumService.getDataSource(this.cesiumViewer, newDataSourceName);
        if (!dataSource) {
            dataSource = this.cesiumService.createDataSource(this.cesiumViewer, newDataSourceName);
            dataSource.show = true; // Set 'dataSource.show' to true as default on create
            // 2. Update 'this.cesiumDataSources'
            this.cesiumDataSources.push(dataSource);
            this.cesiumDataSourceCount += 1;
        }
        // Initialise clustering and options // TODO
        // dataSource.clustering.enabled = false;
        // dataSource.clustering.pixelRange = 5;
        // dataSource.clustering.minimumClusterSize = 2;
        // dataSource.clustering.clusterBillboards = true;
        // dataSource.clustering.clusterLabels = true;
        // dataSource.clustering.clusterPoints = true;
        // dataSource.clustering.clusterEvent.addEventListener((entities, cluster) => {
        //   cluster.label.show = true;
        //   cluster.label.text = entities.length.toLocaleString();
        // });
        return dataSource;
    };
    AppMapComponent.prototype.addDataSourceAndSetAsActive = function () {
        var dataSource = this.addDataSource();
        this.updateActiveDataSource(dataSource);
    };
    AppMapComponent.prototype.removeDataSource = function (dataSource) {
        var index = this.cesiumDataSources.indexOf(dataSource);
        if (index !== -1) {
            this.cesiumDataSources.splice(index, 1);
            this.cesiumViewer.dataSources.remove(dataSource, true);
            if (this.activeDataSource === dataSource) {
                this.cesiumViewer.dataSources.get(0);
                this.updateActiveDataSource(this.cesiumViewer.dataSources.get(0));
            }
        }
    };
    AppMapComponent.prototype.updateActiveDataSource = function (dataSource) {
        if (this.activeDataSource !== dataSource) {
            // 1. Update 'this.activeDataSource'
            this.activeDataSource = dataSource;
            // 2. Update 'this.cesiumDrawingToolsProperties.activeDataSource' and set all other
            // dataSources to inactive
            this.cesiumDrawingToolsProperties.activeDataSource = this.activeDataSource;
            for (var i = 0; i < this.cesiumDrawingToolsProperties.drawingTools.length; i += 1) {
                this.cesiumDrawingToolsProperties.drawingTools[i].isActivated = false;
            }
        }
    };
    AppMapComponent.prototype.showEditDataSourceNameDialog = function (dataSource) {
        this.displayEditDataSourceDialog = true;
        this.editableDataSource = dataSource;
        this.editableDataSourceName = dataSource.name;
    };
    AppMapComponent.prototype.validateEditableDataSourceName = function (event) {
        var updatedDataSourceName = event.target.value;
        // 1. Check for duplicate layer name
        var index = this.cesiumDataSources.findIndex(function (dataSource) {
            return (dataSource.name === updatedDataSourceName);
        });
        if (index !== -1 && (updatedDataSourceName !== this.editableDataSourceName)) {
            this.hasDuplicateDataSourceName = true;
        }
        else {
            this.hasDuplicateDataSourceName = false;
        }
        // 2. Check for empty layer name
        if (updatedDataSourceName.length === 0) {
            this.isInvalidDataSourceName = true;
        }
        else {
            this.isInvalidDataSourceName = false;
        }
    };
    AppMapComponent.prototype.clickSaveEditableDataSourceNameButton = function (event) {
        if (event.keyCode === 13) {
            var buttonElement = document.getElementById('dialog-save-datasource-name-button');
            if (buttonElement) {
                buttonElement.click();
            }
        }
    };
    AppMapComponent.prototype.saveEditableDataSourceName = function (dataSource) {
        var inputElement = document.getElementById('dialog-edit-datasource-name-input');
        var updatedDataSourceName = inputElement.value;
        var index = this.cesiumDataSources.indexOf(dataSource);
        if (index !== -1) {
            this.cesiumDataSources[index].name = updatedDataSourceName;
        }
        index = this.cesiumViewer.dataSources.indexOf(dataSource);
        if (index !== -1) {
            this.cesiumViewer.dataSources.get(index).name = updatedDataSourceName;
        }
    };
    AppMapComponent.prototype.saveCanvasAsImage = function () {
        this.cesiumService.saveCanvasAsImage(this.cesiumViewer);
    };
    AppMapComponent.prototype.exportDataSourceAsGeoJson = function (dataSource) {
        this.cesiumService.exportDataSourceAsGeoJson(dataSource);
    };
    AppMapComponent.prototype.importDataSourceFromGeoJson = function () {
        var fileLayerUploadElement = document.getElementById('file-layer-upload');
        if (fileLayerUploadElement) {
            fileLayerUploadElement.click();
        }
    };
    AppMapComponent.prototype.handleFileLayerUpload = function (event) {
        var _this = this;
        if (event.target.files && event.target.files[0]) {
            var file = event.target.files[0];
            var reader_1 = new FileReader();
            reader_1.addEventListener('load', function () {
                var fileDataURI = reader_1.result;
                var newDataSource = _this.addDataSource();
                var promise = Cesium.GeoJsonDataSource.load(fileDataURI);
                promise.then(function (uploadedDataSource) {
                    var cesiumJulianDate = Cesium.JulianDate.fromDate(new Date());
                    if (uploadedDataSource.entities) {
                        var entities = uploadedDataSource.entities.values;
                        // console.log(entities);
                        var newEntityCount = 0; // Used for file imports that have no 'properties' (i.e. Not exported from IOC)
                        for (var i = 0; i < entities.length; i += 1) {
                            var entity = entities[i];
                            // console.log(entity);
                            if (entity.properties.id) {
                                var newEntityId = entity.properties.id.getValue(cesiumJulianDate);
                                var newEntity = newDataSource.entities.getOrCreateEntity(newEntityId);
                                if (entity.properties.billboard) {
                                    // console.log('BILLBOARD');
                                    newEntity.name = entity.properties.name.getValue(cesiumJulianDate);
                                    newEntity.position = entity.position.getValue(cesiumJulianDate);
                                    newEntity.billboard = entity.properties.billboard.getValue(cesiumJulianDate);
                                    newEntity.label = entity.properties.label.getValue(cesiumJulianDate);
                                }
                                else if (entity.properties.polyline) {
                                    // console.log('POLYLINE');
                                    newEntity.name = entity.properties.name.getValue(cesiumJulianDate);
                                    newEntity.position = entity.polyline.positions.getValue(cesiumJulianDate)[0];
                                    newEntity.polyline = entity.properties.polyline.getValue(cesiumJulianDate);
                                    // Workaround to get 'material' property
                                    var material = entity.properties.polyline.getValue(cesiumJulianDate).material;
                                    var red = material.color.red;
                                    var green = material.color.green;
                                    var blue = material.color.blue;
                                    var alpha = material.color.alpha;
                                    newEntity.polyline.material = new Cesium.Color(red, green, blue, alpha);
                                    newEntity.label = entity.properties.label.getValue(cesiumJulianDate);
                                }
                                else if (entity.properties.polygon) {
                                    // console.log('POLYGON');
                                    newEntity.name = entity.properties.name.getValue(cesiumJulianDate);
                                    var center = Cesium.BoundingSphere.fromPoints(entity.polygon.hierarchy.getValue(cesiumJulianDate).positions).center; // Note: Have to use
                                    // .positions for non-cesium
                                    // exported files
                                    Cesium.Ellipsoid.WGS84.scaleToGeodeticSurface(center, center);
                                    newEntity.position = new Cesium.ConstantPositionProperty(center);
                                    newEntity.polygon = entity.properties.polygon.getValue(cesiumJulianDate);
                                    // Workaround to get 'material' property
                                    var material = entity.properties.polygon.getValue(cesiumJulianDate).material;
                                    var red = material.color.red;
                                    var green = material.color.green;
                                    var blue = material.color.blue;
                                    var alpha = material.color.alpha;
                                    newEntity.polygon.material = new Cesium.Color(red, green, blue, alpha);
                                    newEntity.label = entity.properties.label.getValue(cesiumJulianDate);
                                }
                                else if (entity.properties.ellipse) {
                                    // console.log('ELLIPSE');
                                    newEntity.name = entity.properties.name.getValue(cesiumJulianDate);
                                    newEntity.position = entity.position.getValue(cesiumJulianDate);
                                    newEntity.ellipse = entity.properties.ellipse.getValue(cesiumJulianDate);
                                    // Workaround to get 'material' property
                                    var material = entity.properties.ellipse.getValue(cesiumJulianDate).material;
                                    var red = material.color.red;
                                    var green = material.color.green;
                                    var blue = material.color.blue;
                                    var alpha = material.color.alpha;
                                    newEntity.ellipse.material = new Cesium.Color(red, green, blue, alpha);
                                    newEntity.label = entity.properties.label.getValue(cesiumJulianDate);
                                }
                            }
                            else {
                                newEntityCount += 1;
                                var newEntityId = 'New-Entity-' + (newEntityCount);
                                var newEntity = newDataSource.entities.getOrCreateEntity(newEntityId);
                                if (entity.billboard) {
                                    // console.log('BILLBOARD');
                                    newEntity.name = newEntityId;
                                    newEntity.position = entity.position.getValue(cesiumJulianDate);
                                    newEntity.billboard = new Cesium.BillboardGraphics({
                                        image: new Cesium.ConstantProperty('assets/markers/marker-white.png'),
                                        height: 40,
                                        width: 40,
                                        color: Cesium.Color.RED,
                                    });
                                    newEntity.label = new Cesium.LabelGraphics({
                                        text: new Cesium.ConstantProperty(newEntity.name),
                                        font: '12pt Lucida Sans',
                                        style: new Cesium.ConstantProperty(Cesium.LabelStyle.FILL_AND_OUTLINE),
                                        fillColor: Cesium.Color.WHITE,
                                        outlineColor: Cesium.Color.WHITE,
                                        outlineWidth: 1,
                                        horizontalOrigin: Cesium.HorizontalOrigin.LEFT,
                                        // verticalOrigin: Property,
                                        eyeOffset: new Cesium.Cartesian3(0, 0, -1),
                                        pixelOffset: new Cesium.Cartesian2(20, 0),
                                        // scale: Property,
                                        show: true,
                                    });
                                }
                                else if (entity.polyline) {
                                    // console.log('POLYLINE');
                                    newEntity.name = newEntityId;
                                    newEntity.position = entity.polyline.positions.getValue(cesiumJulianDate)[0];
                                    newEntity.polyline = new Cesium.PolylineGraphics({
                                        positions: entity.polyline.positions.getValue(cesiumJulianDate),
                                        material: Cesium.Color.RED,
                                        width: 3,
                                    });
                                    newEntity.label = new Cesium.LabelGraphics({
                                        text: new Cesium.ConstantProperty(newEntity.name),
                                        font: '12pt Lucida Sans',
                                        style: new Cesium.ConstantProperty(Cesium.LabelStyle.FILL_AND_OUTLINE),
                                        fillColor: Cesium.Color.WHITE,
                                        outlineColor: Cesium.Color.WHITE,
                                        outlineWidth: 1,
                                        horizontalOrigin: Cesium.HorizontalOrigin.LEFT,
                                        // verticalOrigin: Property,
                                        eyeOffset: new Cesium.Cartesian3(0, 0, -1),
                                        pixelOffset: new Cesium.Cartesian2(20, 0),
                                        // scale: Property,
                                        show: true,
                                    });
                                }
                                else if (entity.polygon) {
                                    // console.log('POLYGON');
                                    newEntity.name = newEntityId;
                                    var center = Cesium.BoundingSphere.fromPoints(entity.polygon.hierarchy.getValue(cesiumJulianDate).positions).center; // Note: Have to use
                                    // .positions for non-cesium
                                    // exported files
                                    Cesium.Ellipsoid.WGS84.scaleToGeodeticSurface(center, center);
                                    newEntity.position = new Cesium.ConstantPositionProperty(center);
                                    newEntity.polygon = new Cesium.PolygonGraphics({
                                        hierarchy: entity.polygon.hierarchy.getValue(cesiumJulianDate),
                                        material: new Cesium.Color(1.0, 0.0, 0.0, 0.4),
                                    });
                                    newEntity.label = new Cesium.LabelGraphics({
                                        text: new Cesium.ConstantProperty(newEntity.name),
                                        font: '12pt Lucida Sans',
                                        style: new Cesium.ConstantProperty(Cesium.LabelStyle.FILL_AND_OUTLINE),
                                        fillColor: Cesium.Color.WHITE,
                                        outlineColor: Cesium.Color.WHITE,
                                        outlineWidth: 1,
                                        horizontalOrigin: new Cesium.ConstantProperty(Cesium.HorizontalOrigin.CENTER),
                                        verticalOrigin: new Cesium.ConstantProperty(Cesium.VerticalOrigin.CENTER),
                                        eyeOffset: new Cesium.Cartesian3(0, 0, -1),
                                        // pixelOffset: new Cesium.Cartesian2(20, 0),
                                        // scale: Property,
                                        show: true,
                                    });
                                } // Note: Currently Ellipse not supported for non-Cesium exported files
                            }
                        }
                    }
                }, function (errorMsg) {
                    console.log(errorMsg); // Error!
                });
            }, false);
            reader_1.readAsDataURL(file);
        }
    };
    AppMapComponent.prototype.handleFileUploadToEntity = function (event, cesiumEntity) {
        var _this = this;
        if (event.target.files && event.target.files[0]) {
            var _loop_1 = function (i) {
                var reader = new FileReader();
                var file = event.target.files[i];
                reader.addEventListener('load', function () {
                    var fileName = file.name;
                    var type = file.type;
                    var fileType = type.split('/')[0];
                    var fileExtension = type.split('/')[1];
                    // const fileDataURI = this.sanitizer.bypassSecurityTrustResourceUrl(this.result); //
                    // Note: DataURI is too slow to load for big files
                    var fileURL = _this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(file)); // Much more
                    // optimized
                    // compared to
                    // dataURI
                    var uploadedContent = {
                        fileName: fileName,
                        fileType: fileType,
                        fileExtension: fileExtension,
                        // fileDataURI,
                        fileURL: fileURL,
                    };
                    cesiumEntity.customProperties.uploadedContentList.unshift(uploadedContent);
                }, false);
                if (file) {
                    reader.readAsDataURL(file);
                }
            };
            for (var i = 0; i < event.target.files.length; i += 1) {
                _loop_1(i);
            }
        }
    };
    AppMapComponent.prototype.removeFileUploadFromEntity = function (uploadedContent, cesiumEntity) {
        var index = cesiumEntity.customProperties.uploadedContentList.indexOf(uploadedContent);
        if (index > -1) {
            cesiumEntity.customProperties.uploadedContentList.splice(index, 1);
        }
    };
    AppMapComponent.prototype.updateEntityIcon = function (icon) {
        this.cesiumDrawingToolsProperties.selectedIcon = icon.iconUrl;
        this.cesiumService.updateEntityIcon(this.cesiumDrawingToolsProperties);
    };
    AppMapComponent.prototype.updateEntityColor = function () {
        this.cesiumService.updateEntityColor(this.cesiumDrawingToolsProperties);
    };
    /*-----------------------------------------------------------------------------------
   Static DataSources / Overlays
   -----------------------------------------------------------------------------------*/
    AppMapComponent.prototype.initStaticDataSources = function () {
        this.loadMapLayerService.initLayers(this.cesiumViewer, this.cesiumDataSources);
    };
    /*-----------------------------------------------------------------------------------
     Dynamic DataSources / Overlays
     -----------------------------------------------------------------------------------*/
    AppMapComponent.prototype.initDynamicDataSources = function () {
        // this.initBFTDataSource();
        this.loadMapLayerService.initAirTracks(this.cesiumViewer, this.cesiumDynamicDataSources);
    };
    AppMapComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'app-map',
            template: __webpack_require__("./src/app/component/operator/main-panel/map/map.component.html"),
            styles: [__webpack_require__("./src/app/component/operator/main-panel/map/map.component.css")],
            providers: [__WEBPACK_IMPORTED_MODULE_6_primeng_components_common_messageservice__["MessageService"]],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__service_cesium_service__["a" /* CesiumService */], __WEBPACK_IMPORTED_MODULE_4__service_loadMapLayer_service__["a" /* LoadMapLayerService */],
            __WEBPACK_IMPORTED_MODULE_1__angular_common_http__["a" /* HttpClient */], __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__["DomSanitizer"],
            __WEBPACK_IMPORTED_MODULE_5__service_web_socket_web_service__["a" /* SocketWebService */], __WEBPACK_IMPORTED_MODULE_6_primeng_components_common_messageservice__["MessageService"]])
    ], AppMapComponent);
    return AppMapComponent;
}());



/***/ }),

/***/ "./src/app/component/operator/operator.component.css":
/***/ (function(module, exports) {

module.exports = "#layout-operator-container {\r\n  background-color: #303030;\r\n}\r\n\r\n#top-bar {\r\n  z-index: 6;\r\n}\r\n\r\n#main-panel {\r\n  z-index: 0;\r\n}\r\n"

/***/ }),

/***/ "./src/app/component/operator/operator.component.html":
/***/ (function(module, exports) {

module.exports = "<div id=\"layout-operator-container\" fxLayout=\"column\" fxFlexFill>\r\n  <!-- Top Bar -->\r\n  <app-top-bar id=\"top-bar\" class=\"mat-elevation-z6\"></app-top-bar>\r\n\r\n  <!-- Main Content -->\r\n  <app-main-panel id=\"main-panel\" fxFlex fxLayout=\"column\"></app-main-panel>\r\n</div>"

/***/ }),

/***/ "./src/app/component/operator/operator.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OperatorComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var OperatorComponent = /** @class */ (function () {
    function OperatorComponent() {
    }
    OperatorComponent.prototype.ngOnInit = function () {
    };
    OperatorComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'app-layout-operator',
            template: __webpack_require__("./src/app/component/operator/operator.component.html"),
            styles: [__webpack_require__("./src/app/component/operator/operator.component.css")],
        }),
        __metadata("design:paramtypes", [])
    ], OperatorComponent);
    return OperatorComponent;
}());



/***/ }),

/***/ "./src/app/component/operator/top-bar/clock/clock.component.css":
/***/ (function(module, exports) {

module.exports = ".date-time {\r\n  font: 16px cabin-bold;\r\n  color: #e6e6e6;\r\n  height: 40px;\r\n}\r\n"

/***/ }),

/***/ "./src/app/component/operator/top-bar/clock/clock.component.html":
/***/ (function(module, exports) {

module.exports = "<div class=\"date-time\" fxLayout=\"column\" fxLayoutAlign=\"center center\">\r\n  <div>{{date}}</div>\r\n  <div>{{time}}</div>\r\n</div>\r\n"

/***/ }),

/***/ "./src/app/component/operator/top-bar/clock/clock.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ClockComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

/**
 * Custom clock widget to display the current date and time
 */
var ClockComponent = /** @class */ (function () {
    function ClockComponent() {
        var _this = this;
        this.date = '';
        this.time = '';
        this.updateClock();
        setInterval(function () { return _this.updateClock(); }, 1000);
    }
    ClockComponent.prototype.updateClock = function () {
        var days = [
            'Sunday',
            'Monday',
            'Tuesday',
            'Wednesday',
            'Monday',
            'Monday',
            'Monday',
        ];
        var months = [
            'Jan',
            'Feb',
            'Mar',
            'Apr',
            'May',
            'Jun',
            'Jul',
            'Aug',
            'Sep',
            'Oct',
            'Nov',
            'Dec',
        ];
        var date = new Date();
        var hourString = this.getString(date.getHours());
        var minuteString = this.getString(date.getMinutes());
        var secondString = this.getString(date.getSeconds());
        this.date = date.getDate() + ' ' + months[date.getMonth()] + ' ' + date.getFullYear();
        this.time = hourString + ':' + minuteString + ':' + secondString;
    };
    /**
     * Converts a number into a string, zero padding if necessary/
     * @param num Number to be converted into string.
     */
    ClockComponent.prototype.getString = function (num) {
        if (num < 10) {
            return '0' + num.toString();
        }
        return num.toString();
    };
    ClockComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'app-clock',
            template: __webpack_require__("./src/app/component/operator/top-bar/clock/clock.component.html"),
            styles: [__webpack_require__("./src/app/component/operator/top-bar/clock/clock.component.css")],
        }),
        __metadata("design:paramtypes", [])
    ], ClockComponent);
    return ClockComponent;
}());



/***/ }),

/***/ "./src/app/component/operator/top-bar/top-bar.component.css":
/***/ (function(module, exports) {

module.exports = "#toolbar {\r\n  /* background: linear-gradient(#030303, #33373a93) !important; */\r\n  background: -webkit-gradient(linear, left top, left bottom, from(#202730), to(#364046)) !important;\r\n  background: linear-gradient(#202730, #364046) !important;\r\n}\r\n\r\n.title {\r\n  font-family: 'akashi';\r\n  font-size: 28px;\r\n  margin: 3px;\r\n  color: #e6e6e6;\r\n}\r\n\r\n.white-text {\r\n  color: #e6e6e6;\r\n}\r\n"

/***/ }),

/***/ "./src/app/component/operator/top-bar/top-bar.component.html":
/***/ (function(module, exports) {

module.exports = "<mat-toolbar id=\"toolbar\">\r\n  <!-- Logo + Title -->\r\n  <div class=\"top-bar-bg\" fxFlex=\"20%\" fxLayout=\"row\" fxLayoutAlign=\"start top\">\r\n    <div fxFlex fxLayoutAlign=\"start center\">\r\n      <span class=\"title\" fxLayoutAlign=\"center center\">FlightApp</span>\r\n    </div>\r\n  </div>\r\n  <!-- Clock -->\r\n  <div class=\"top-bar-bg\" fxFlex=\"80%\" fxLayout=\"row\" fxLayoutAlign=\"end center\">\r\n    <app-clock fxLayoutAlign=\"center center\"></app-clock>\r\n  </div>\r\n</mat-toolbar>\r\n"

/***/ }),

/***/ "./src/app/component/operator/top-bar/top-bar.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TopBarComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var TopBarComponent = /** @class */ (function () {
    function TopBarComponent() {
    }
    TopBarComponent.prototype.ngOnInit = function () {
    };
    TopBarComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'app-top-bar',
            template: __webpack_require__("./src/app/component/operator/top-bar/top-bar.component.html"),
            styles: [__webpack_require__("./src/app/component/operator/top-bar/top-bar.component.css")],
        }),
        __metadata("design:paramtypes", [])
    ], TopBarComponent);
    return TopBarComponent;
}());



/***/ }),

/***/ "./src/app/config/app.config.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppConfig; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__icon_config__ = __webpack_require__("./src/app/config/icon.config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Configuration for IOC client application.
 */
var AppConfig = /** @class */ (function () {
    function AppConfig(iconConfig) {
        this.iconConfig = iconConfig;
        // SG_BOUNDARY_VECTOR_URL = 'assets/data/SG.geojson';
        this.FIR_VECTOR_URL = 'assets/data/FIR_ICAO_2009.geojson'; //FIR_ICAO_2009
        this.RUNWAYS_URL = 'assets/data/runway_l.geojson';
        this.AIRWAY_URL = 'assets/data/airways_sg.geojson';
        this.RESTRICTED_AIRSPACE_URL = 'assets/overlays/drone_full.geojson';
        // RESTRICTED_AIRSPACE_URL = '../data/geojson/restrictedAirspace_A.geojson';
        this.F24_URL = 'https://data-live.flightradar24.com/zones/fcgi/feed.js?';
        this.BOUNDS = 'bounds=38.67,-14.82,67.30,136.67';
        this.OPTIONS = '&faa=1&mlat=1&flarm=1&adsb=1&gnd=1&air=1&vehicles=1&estimated=1';
        this.LAYER_NAMES = {
            airTrackLayerName: 'Air Track',
            firLayerName: 'FIR',
            airwayLayerName: 'Airway',
            runwayLayerName: 'Runway',
            droneRestrictionLayerName: 'Drone Restricted Zone',
        };
    }
    AppConfig.prototype.setBounds = function (lat1, lat2, lon1, lon2) {
        this.BOUNDS = 'bounds=' + lat1 + ',' + lat2 + ',' + lon1 + ',' + lon2;
        // console.log('update Bounds', this.BOUNDS);
    };
    AppConfig.prototype.isNonEditableEntity = function (pickedEntityType) {
        var keys = Object.keys(this.LAYER_NAMES);
        for (var i = 0; i < keys.length; i += 1) {
            var layerName = this.LAYER_NAMES[keys[i]];
            // if (layerName !== this.LAYER_NAMES.firLayerName)
            if (pickedEntityType.startsWith(layerName)) {
                return true;
            }
        }
        return false;
    };
    AppConfig.prototype.isNonPickableEntity = function (pickedEntityType) {
        return pickedEntityType.startsWith(this.LAYER_NAMES.firLayerName);
    };
    AppConfig = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__icon_config__["a" /* IconConfig */]])
    ], AppConfig);
    return AppConfig;
}());



/***/ }),

/***/ "./src/app/config/icon.config.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IconConfig; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_material__ = __webpack_require__("./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__ = __webpack_require__("./node_modules/@angular/platform-browser/esm5/platform-browser.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Configuration for Material Icons.
 */
var IconConfig = /** @class */ (function () {
    function IconConfig(iconRegistry, sanitizer) {
        this.iconRegistry = iconRegistry;
        this.registerIcons(iconRegistry, sanitizer);
    }
    /**
     * Registers the material design icon set.
     *
     * @param iconRegistry Registry of material icons
     * @param sanitizer Sanitizer to trust insecure url resources
     */
    IconConfig.prototype.registerIcons = function (iconRegistry, sanitizer) {
        this.iconRegistry
            .addSvgIcon('incident', sanitizer.bypassSecurityTrustResourceUrl('/assets/icons/solid/incident-white.svg'))
            .addSvgIcon('calendar', sanitizer.bypassSecurityTrustResourceUrl('/assets/icons/solid/calendar-white.svg'))
            .addSvgIcon('opslog', sanitizer.bypassSecurityTrustResourceUrl('/assets/icons/solid/opslog-white.svg'))
            .addSvgIcon('map', sanitizer.bypassSecurityTrustResourceUrl('/assets/icons/solid/map-alt-white.svg'))
            .addSvgIcon('plus', sanitizer.bypassSecurityTrustResourceUrl('/assets/icons/solid/plus-white.svg'))
            .addSvgIcon('marker', sanitizer.bypassSecurityTrustResourceUrl('/assets/icons/solid/map-marker-alt-white.svg'))
            .addSvgIcon('user', sanitizer.bypassSecurityTrustResourceUrl('/assets/icons/solid/users.svg'));
    };
    IconConfig = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_material__["l" /* MatIconRegistry */], __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__["DomSanitizer"]])
    ], IconConfig);
    return IconConfig;
}());



/***/ }),

/***/ "./src/app/config/web.config.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WebConfig; });
/**
 * Global constants for web resources.
 */
var WebConfig = /** @class */ (function () {
    function WebConfig() {
    }
    WebConfig.SERVER_URL = 'server.ioc18.tech';
    return WebConfig;
}());



/***/ }),

/***/ "./src/app/module/material.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaterialModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_cdk_table__ = __webpack_require__("./node_modules/@angular/cdk/esm5/table.es5.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_material__ = __webpack_require__("./node_modules/@angular/material/esm5/material.es5.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var MaterialModule = /** @class */ (function () {
    function MaterialModule() {
    }
    MaterialModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
            exports: [
                __WEBPACK_IMPORTED_MODULE_1__angular_cdk_table__["m" /* CdkTableModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["a" /* MatAutocompleteModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["b" /* MatButtonModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["c" /* MatButtonToggleModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["d" /* MatCardModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["e" /* MatCheckboxModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["f" /* MatChipsModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["B" /* MatStepperModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["g" /* MatDatepickerModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["h" /* MatDialogModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["i" /* MatExpansionModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["j" /* MatGridListModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["k" /* MatIconModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["m" /* MatInputModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["n" /* MatListModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["o" /* MatMenuModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["p" /* MatNativeDateModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["q" /* MatPaginatorModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["r" /* MatProgressBarModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["s" /* MatProgressSpinnerModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["t" /* MatRadioModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["u" /* MatRippleModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["v" /* MatSelectModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["w" /* MatSidenavModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["y" /* MatSliderModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["x" /* MatSlideToggleModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["z" /* MatSnackBarModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["A" /* MatSortModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["C" /* MatTableModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["D" /* MatTabsModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["E" /* MatToolbarModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_material__["F" /* MatTooltipModule */],
            ],
        })
    ], MaterialModule);
    return MaterialModule;
}());



/***/ }),

/***/ "./src/app/module/primeng.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PrimengModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_primeng_accordion__ = __webpack_require__("./node_modules/primeng/accordion.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_primeng_accordion___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_primeng_accordion__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_primeng_button__ = __webpack_require__("./node_modules/primeng/button.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_primeng_button___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_primeng_button__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_primeng_checkbox__ = __webpack_require__("./node_modules/primeng/checkbox.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_primeng_checkbox___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_primeng_checkbox__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_primeng_colorpicker__ = __webpack_require__("./node_modules/primeng/colorpicker.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_primeng_colorpicker___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_primeng_colorpicker__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_primeng_dialog__ = __webpack_require__("./node_modules/primeng/dialog.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_primeng_dialog___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_primeng_dialog__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_primeng_fileupload__ = __webpack_require__("./node_modules/primeng/fileupload.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_primeng_fileupload___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_primeng_fileupload__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_primeng_inputtext__ = __webpack_require__("./node_modules/primeng/inputtext.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_primeng_inputtext___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_primeng_inputtext__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_primeng_lightbox__ = __webpack_require__("./node_modules/primeng/lightbox.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_primeng_lightbox___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_primeng_lightbox__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_primeng_overlaypanel__ = __webpack_require__("./node_modules/primeng/overlaypanel.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_primeng_overlaypanel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_primeng_overlaypanel__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_primeng_selectbutton__ = __webpack_require__("./node_modules/primeng/selectbutton.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_primeng_selectbutton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_primeng_selectbutton__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_primeng_sidebar__ = __webpack_require__("./node_modules/primeng/sidebar.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_primeng_sidebar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_primeng_sidebar__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_primeng_shared__ = __webpack_require__("./node_modules/primeng/shared.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_primeng_shared___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_primeng_shared__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_primeng_slider__ = __webpack_require__("./node_modules/primeng/slider.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_primeng_slider___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_primeng_slider__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_primeng_tabmenu__ = __webpack_require__("./node_modules/primeng/tabmenu.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_primeng_tabmenu___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_primeng_tabmenu__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_primeng_tabview__ = __webpack_require__("./node_modules/primeng/tabview.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_primeng_tabview___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15_primeng_tabview__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_primeng_tooltip__ = __webpack_require__("./node_modules/primeng/tooltip.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_primeng_tooltip___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16_primeng_tooltip__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17_primeng_growl__ = __webpack_require__("./node_modules/primeng/growl.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17_primeng_growl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_17_primeng_growl__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


















var PrimengModule = /** @class */ (function () {
    function PrimengModule() {
    }
    PrimengModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
            exports: [
                __WEBPACK_IMPORTED_MODULE_1_primeng_accordion__["AccordionModule"],
                __WEBPACK_IMPORTED_MODULE_2_primeng_button__["ButtonModule"],
                __WEBPACK_IMPORTED_MODULE_3_primeng_checkbox__["CheckboxModule"],
                __WEBPACK_IMPORTED_MODULE_4_primeng_colorpicker__["ColorPickerModule"],
                __WEBPACK_IMPORTED_MODULE_5_primeng_dialog__["DialogModule"],
                __WEBPACK_IMPORTED_MODULE_6_primeng_fileupload__["FileUploadModule"],
                __WEBPACK_IMPORTED_MODULE_7_primeng_inputtext__["InputTextModule"],
                __WEBPACK_IMPORTED_MODULE_8_primeng_lightbox__["LightboxModule"],
                __WEBPACK_IMPORTED_MODULE_9_primeng_overlaypanel__["OverlayPanelModule"],
                __WEBPACK_IMPORTED_MODULE_10_primeng_selectbutton__["SelectButtonModule"],
                __WEBPACK_IMPORTED_MODULE_11_primeng_sidebar__["SidebarModule"],
                __WEBPACK_IMPORTED_MODULE_12_primeng_shared__["SharedModule"],
                __WEBPACK_IMPORTED_MODULE_13_primeng_slider__["SliderModule"],
                __WEBPACK_IMPORTED_MODULE_14_primeng_tabmenu__["TabMenuModule"],
                __WEBPACK_IMPORTED_MODULE_15_primeng_tabview__["TabViewModule"],
                __WEBPACK_IMPORTED_MODULE_16_primeng_tooltip__["TooltipModule"],
                __WEBPACK_IMPORTED_MODULE_17_primeng_growl__["GrowlModule"],
            ],
            declarations: [],
        })
    ], PrimengModule);
    return PrimengModule;
}());



/***/ }),

/***/ "./src/app/module/routing.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppRoutingModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("./node_modules/@angular/router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__component_operator_operator_component__ = __webpack_require__("./src/app/component/operator/operator.component.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var appRoutes = [
    {
        path: 'operator',
        component: __WEBPACK_IMPORTED_MODULE_2__component_operator_operator_component__["a" /* OperatorComponent */],
    },
    {
        path: '',
        redirectTo: '/operator',
        pathMatch: 'full',
    },
];
var AppRoutingModule = /** @class */ (function () {
    function AppRoutingModule() {
    }
    AppRoutingModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_1__angular_router__["RouterModule"].forRoot(appRoutes, { enableTracing: false }),
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_1__angular_router__["RouterModule"],
            ],
            providers: [],
        })
    ], AppRoutingModule);
    return AppRoutingModule;
}());



/***/ }),

/***/ "./src/app/service/cesium.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CesiumService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Subject__ = __webpack_require__("./node_modules/rxjs/_esm5/Subject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config_app_config__ = __webpack_require__("./src/app/config/app.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__("./node_modules/moment/moment.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var CesiumService = /** @class */ (function () {
    function CesiumService(appConfig) {
        this.appConfig = appConfig;
        this.geofenceSubject = new __WEBPACK_IMPORTED_MODULE_1_rxjs_Subject__["Subject"]();
    }
    CesiumService.prototype.initCesiumViewer = function (cesiumMapContainerId, cesiumCreditContainerId) {
        var cesiumViewer = new Cesium.Viewer(cesiumMapContainerId, // Important: id of HTML container to display the map
        {
            // baseLayerPicker: false, // Top right button
            // sceneModePicker: false, // Top right button
            // scene3DOnly: false, // Top right button
            homeButton: false,
            // geocoder: false, // Top right button
            timeline: false,
            animation: false,
            infoBox: false,
            selectionIndicator: false,
            fullscreenButton: false,
            navigationHelpButton: false,
            navigationInstructionsInitiallyVisible: false,
            contextOptions: {
                webgl: { preserveDrawingBuffer: true },
            },
            creditContainer: cesiumCreditContainerId,
        });
        /** ----- Cesium Camera Settings ----- **/
        /* Set to 2d map */
        cesiumViewer.scene.morphTo2D(0); // Note: 2D mode will cause clustered labels to look blurry
        /* Set Camera view */
        // Singapore Overview: const lon = 103.819775, lat = 1.3598951, height = 55000;
        // Marina Bay Floating Platform: const lon = 103.85909039, lat = 1.28875506, height =
        // 1023.5741153041954;
        var lon = 103.85909039;
        var lat = 1.28875506;
        var height = 1000000;
        cesiumViewer.camera.setView({
            destination: Cesium.Cartesian3.fromDegrees(lon, lat, height),
            heading: 0,
            pitch: -Cesium.Math.PI_OVER_TWO,
            roll: 0.0,
        });
        /* Remove zoom to entity */
        cesiumViewer.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
        /* Remove CameraEventType.RIGHT_DRAG for zooming in by forcing zoom in on 'Cesium.CameraEventType.WHEEL' only */
        cesiumViewer.scene.screenSpaceCameraController.zoomEventTypes = Cesium.CameraEventType.WHEEL;
        /* Add Default ScreenSpaceEventHandlers */
        // this.addDefaultRightClickInputAction(cesiumViewer);
        this.addDefaultMouseMoveInputAction(cesiumViewer);
        return cesiumViewer;
    };
    CesiumService.prototype.initCesiumDrawingTools = function (cesiumViewer, cesiumDrawingToolsContainerId, cesiumDrawingToolsProperties) {
        var drawingToolsContainerDiv = document.getElementById(cesiumDrawingToolsContainerId);
        if (drawingToolsContainerDiv) {
            this.addLeftClickEntityPickerInputAction(cesiumViewer, cesiumDrawingToolsProperties);
            var drawingToolsHandler = new Cesium.ScreenSpaceEventHandler(cesiumViewer.canvas);
            cesiumDrawingToolsProperties.drawingToolsHandler = drawingToolsHandler;
            for (var i = 0; i < cesiumDrawingToolsProperties.drawingTools.length; i += 1) {
                var drawingTool = cesiumDrawingToolsProperties.drawingTools[i];
                if (drawingTool.type === 'draw-marker') {
                    this.initDrawMarkerButtonFunctions(cesiumViewer, cesiumDrawingToolsProperties, drawingTool);
                }
                else if (drawingTool.type === 'draw-polyline') {
                    this.initDrawPolylineButtonFunctions(cesiumViewer, cesiumDrawingToolsProperties, drawingTool);
                }
                else if (drawingTool.type === 'draw-polygon') {
                    this.initDrawPolygonButtonFunctions(cesiumViewer, cesiumDrawingToolsProperties, drawingTool);
                }
                else if (drawingTool.type === 'draw-circle') {
                    this.initDrawCircleButtonFunctions(cesiumViewer, cesiumDrawingToolsProperties, drawingTool);
                }
                else if (drawingTool.type === 'draw-scribble') {
                    this.initDrawScribbleButtonFunctions(cesiumViewer, cesiumDrawingToolsProperties, drawingTool);
                }
            }
        }
    };
    CesiumService.prototype.registerDataSource = function (cesiumViewer, dataSource, dataSourceName) {
        var dataSourceOld = this.getDataSource(cesiumViewer, dataSourceName);
        if (dataSourceOld) {
            cesiumViewer.dataSources.remove(dataSourceOld, true);
        }
        dataSource.name = dataSourceName;
        dataSource.show = true;
        cesiumViewer.dataSources.add(dataSource);
    };
    CesiumService.prototype.createDataSource = function (cesiumViewer, dataSourceName) {
        var newDataSourceName = dataSourceName;
        for (var i = 0; i < cesiumViewer.dataSources.length; i += 1) {
            var dataSource = cesiumViewer.dataSources.get(i);
            if (dataSource.name === dataSourceName) {
                newDataSourceName = newDataSourceName + ' - Copy';
            }
        }
        var newDataSource = new Cesium.GeoJsonDataSource(newDataSourceName);
        cesiumViewer.dataSources.add(newDataSource);
        return newDataSource;
    };
    CesiumService.prototype.getDataSource = function (cesiumViewer, dataSourceName) {
        for (var i = 0; i < cesiumViewer.dataSources.length; i += 1) {
            var dataSource = cesiumViewer.dataSources.get(i);
            if (dataSource.name === dataSourceName) {
                return dataSource;
            }
        }
        return null;
    };
    CesiumService.prototype.resetDrawingToolsButtons = function (cesiumDrawingToolsProperties, activeDrawingTool) {
        for (var i = 0; i < cesiumDrawingToolsProperties.drawingTools.length; i += 1) {
            var drawingTool = cesiumDrawingToolsProperties.drawingTools[i];
            if (drawingTool !== activeDrawingTool) {
                drawingTool.isActivated = false;
            }
        }
        var drawingToolsHandler = cesiumDrawingToolsProperties.drawingToolsHandler;
        drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
        drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);
        drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE);
    };
    CesiumService.prototype.saveCanvasAsImage = function (cesiumViewer) {
        if (cesiumViewer && cesiumViewer.scene) {
            cesiumViewer.scene.canvas.toBlob(function (blob) {
                var objUrl = URL.createObjectURL(blob);
                var link = document.createElement('a');
                link.download = 'map-download.png';
                link.href = objUrl;
                document.body.appendChild(link);
                link.click(); // Mimic click on "download button"
                document.body.removeChild(link);
            });
        }
    };
    CesiumService.prototype.exportDataSourceAsGeoJson = function (dataSource) {
        var geojsonStr = this.convertDataSourceToGeoJson(dataSource);
        var encodedJsonString = 'data:text/json;charset=utf-8,' + encodeURIComponent(geojsonStr);
        var link = document.createElement('a');
        link.download = 'layer-download.geojson';
        link.href = encodedJsonString;
        document.body.appendChild(link);
        link.click(); // Mimic click on "download button"
        document.body.removeChild(link);
    };
    CesiumService.prototype.updateEntityIcon = function (cesiumDrawingToolsProperties) {
        if (Cesium.defined(cesiumDrawingToolsProperties.pickedEntity.billboard)) {
            cesiumDrawingToolsProperties.pickedEntity.billboard.image =
                new Cesium.ConstantProperty(cesiumDrawingToolsProperties.selectedIcon);
        }
    };
    CesiumService.prototype.updateEntityColor = function (cesiumDrawingToolsProperties) {
        if (Cesium.defined(cesiumDrawingToolsProperties.pickedEntity.billboard)) {
            cesiumDrawingToolsProperties.pickedEntity.billboard.color =
                Cesium.Color.fromCssColorString(cesiumDrawingToolsProperties.selectedColor);
        }
        else if (Cesium.defined(cesiumDrawingToolsProperties.pickedEntity.polyline)) {
            cesiumDrawingToolsProperties.pickedEntity.polyline.material.color =
                Cesium.Color.fromCssColorString(cesiumDrawingToolsProperties.selectedColor);
        }
        else if (Cesium.defined(cesiumDrawingToolsProperties.pickedEntity.polygon)) {
            cesiumDrawingToolsProperties.pickedEntity.polygon.material.color =
                Cesium.Color.fromCssColorString(cesiumDrawingToolsProperties.selectedColor);
            cesiumDrawingToolsProperties.pickedEntity.polygon.material.color._value.alpha =
                (cesiumDrawingToolsProperties.selectedColorAlpha / 10);
        }
        else if (Cesium.defined(cesiumDrawingToolsProperties.pickedEntity.ellipse)) {
            cesiumDrawingToolsProperties.pickedEntity.ellipse.material.color =
                Cesium.Color.fromCssColorString(cesiumDrawingToolsProperties.selectedColor);
            cesiumDrawingToolsProperties.pickedEntity.ellipse.material.color._value.alpha =
                (cesiumDrawingToolsProperties.selectedColorAlpha / 10);
        }
    };
    CesiumService.prototype.setCameraView = function (cesiumViewer, location) {
        cesiumViewer.camera.setView({
            destination: Cesium.Cartesian3.fromDegrees(location.lonInDegrees, location.latInDegrees, location.heightInMeters),
            heading: 0,
            pitch: -Cesium.Math.PI_OVER_TWO,
            roll: 0.0,
        });
    };
    CesiumService.prototype.addGeofenceHandler = function (cesiumViewer, dataSource, rectangleGraphicsOptions) {
        var geofenceEntityId = 'geofence';
        var startCartographic;
        var endCartographic;
        var currCartographic;
        var isRightDown = false;
        var west;
        var south;
        var east;
        var north;
        var handler = new Cesium.ScreenSpaceEventHandler(cesiumViewer.canvas);
        handler.setInputAction(function (click) {
            isRightDown = true;
            var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
            var cartesian = cesiumViewer.camera.pickEllipsoid(click.position, ellipsoid);
            startCartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
            endCartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
            if (startCartographic && endCartographic) {
                var startLonInDegrees = Cesium.Math.toDegrees(startCartographic.longitude);
                var startLatInDegrees = Cesium.Math.toDegrees(startCartographic.latitude);
                var endLonInDegrees = Cesium.Math.toDegrees(endCartographic.longitude);
                var endLatInDegrees = Cesium.Math.toDegrees(endCartographic.latitude);
                west = startLonInDegrees > endLonInDegrees ? endLonInDegrees : startLonInDegrees;
                south = startLatInDegrees > endLatInDegrees ? endLatInDegrees : startLatInDegrees;
                east = startLonInDegrees < endLonInDegrees ? endLonInDegrees : startLonInDegrees;
                north = startLatInDegrees < endLatInDegrees ? endLatInDegrees : startLatInDegrees;
                var entity = dataSource.entities.getOrCreateEntity(geofenceEntityId);
                entity.rectangle = new Cesium.RectangleGraphics(rectangleGraphicsOptions);
                entity.rectangle.coordinates = new Cesium.CallbackProperty(function () {
                    return Cesium.Rectangle.fromDegrees(west, south, east, north);
                }, false);
            }
        }, Cesium.ScreenSpaceEventType.RIGHT_DOWN);
        handler.setInputAction(function (click) {
            isRightDown = false;
            var westConfirmed = Object.assign(west);
            var southConfirmed = Object.assign(south);
            var eastConfirmed = Object.assign(east);
            var northConfirmed = Object.assign(north);
            var entity = dataSource.entities.getById(geofenceEntityId);
            entity.rectangle.coordinates = new Cesium.ConstantProperty(Cesium.Rectangle.fromDegrees(westConfirmed, southConfirmed, eastConfirmed, northConfirmed));
            // this.updateGeofenceEntity(entity);
        }, Cesium.ScreenSpaceEventType.RIGHT_UP);
        handler.setInputAction(function (movement) {
            if (isRightDown) {
                var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
                var cartesian = cesiumViewer.camera.pickEllipsoid(movement.endPosition, ellipsoid);
                currCartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
                if (startCartographic && currCartographic) {
                    var startLonInDegrees = Cesium.Math.toDegrees(startCartographic.longitude);
                    var startLatInDegrees = Cesium.Math.toDegrees(startCartographic.latitude);
                    var currLonInDegrees = Cesium.Math.toDegrees(currCartographic.longitude);
                    var currLatInDegrees = Cesium.Math.toDegrees(currCartographic.latitude);
                    west = startLonInDegrees > currLonInDegrees ? currLonInDegrees : startLonInDegrees;
                    south = startLatInDegrees > currLatInDegrees ? currLatInDegrees : startLatInDegrees;
                    east = startLonInDegrees < currLonInDegrees ? currLonInDegrees : startLonInDegrees;
                    north = startLatInDegrees < currLatInDegrees ? currLatInDegrees : startLatInDegrees;
                }
            }
        }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);
        // handler.setInputAction((movement: any) => {
        //   const entity: Cesium.Entity = dataSource.entities.getById(geofenceEntityId);
        //   if (entity) {
        //     dataSource.entities.removeById(entity.id);
        //   }
        // }, Cesium.ScreenSpaceEventType.RIGHT_DOUBLE_CLICK);
    };
    CesiumService.prototype.updateGeofenceEntity = function (geofenceEntity) {
        this.geofenceSubject.next(geofenceEntity); // To update geofenceEntity for components that uses
        // geofence and have subscribe to its service
    };
    CesiumService.prototype.getGeofenceEntityAsObservable = function () {
        return this.geofenceSubject.asObservable();
    };
    CesiumService.prototype.addLeftClickEntityPickerInputAction = function (cesiumViewer, cesiumDrawingToolsProperties) {
        var _this = this;
        cesiumViewer.screenSpaceEventHandler.setInputAction(function (click) {
            var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
            var cartesian = cesiumViewer.camera.pickEllipsoid(click.position, ellipsoid);
            // const cartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
            // const lonInDegrees = Cesium.Math.toDegrees(cartographic.longitude);
            // const latInDegrees = Cesium.Math.toDegrees(cartographic.latitude);
            // const pickedEntity = cesiumViewer.scene.pick(click.position);
            var pickedObjs = cesiumViewer.scene.drillPick(click.position);
            // console.log('drill picked', pickedObjs);
            var pickedEntity = _this.prioritizePicks(pickedObjs);
            // console.log('choosen picked', pickedEntity);
            if (Cesium.defined(pickedEntity) && pickedEntity.id && pickedEntity.id.id) {
                cesiumDrawingToolsProperties.pickedEntity = _this.getEntity(cesiumViewer, pickedEntity.id.id);
                // NON-EDITABLE ENTITY // TODO: Change static datasource/layer names to get from app.config
                if (cesiumDrawingToolsProperties.pickedEntity.type
                    && _this.appConfig.isNonEditableEntity(cesiumDrawingToolsProperties.pickedEntity.type)) {
                    console.log('PICKED - Non-Editable: ', cesiumDrawingToolsProperties.pickedEntity.id);
                    cesiumDrawingToolsProperties.pickedEntityEditable = false;
                }
                else {
                    console.log('PICKED - Editable: ', cesiumDrawingToolsProperties.pickedEntity.id);
                    _this.handleEditableEntity(cesiumViewer, pickedEntity, cesiumDrawingToolsProperties);
                }
                // Initialise dialog position based on entity position
                var windowXYPosition = Cesium.SceneTransforms.wgs84ToWindowCoordinates(cesiumViewer.scene, cartesian);
                cesiumDrawingToolsProperties.displayEntityDetailsDialog_xPos = windowXYPosition.x + 10;
                cesiumDrawingToolsProperties.displayEntityDetailsDialog_yPos = windowXYPosition.y + 10;
                if (cesiumDrawingToolsProperties.displayEntityDetailsDialog) {
                    cesiumDrawingToolsProperties.displayEntityDetailsDialog = false;
                    setTimeout(function () {
                        cesiumDrawingToolsProperties.displayEntityDetailsDialog = true;
                    }, 100);
                }
                else {
                    cesiumDrawingToolsProperties.displayEntityDetailsDialog = true;
                }
            }
        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);
    };
    CesiumService.prototype.handleEditableEntity = function (cesiumViewer, pickedEntity, cesiumDrawingToolsProperties) {
        var _this = this;
        cesiumDrawingToolsProperties.pickedEntityEditable = true;
        // Default properties
        var entityColor;
        var entityColorAlpha = 1; // Default
        cesiumDrawingToolsProperties.displayEntityDetailsActions = [
            {
                type: 'media',
                title: 'Add image or video',
                isActivated: false,
                iconUrl: '../../assets/icons/solid/camera-white.svg',
                function: function (event, overlayPanel) {
                    var fileUploadElement = document.getElementById('file-upload');
                    if (fileUploadElement) {
                        fileUploadElement.click();
                    }
                },
            },
            {
                type: 'delete',
                title: 'Delete Entity',
                isActivated: false,
                iconUrl: '../../assets/icons/solid/trash-alt-white.svg',
                function: function () {
                    var dataSource = _this.getEntityDataSourceFromEntityId(cesiumViewer, pickedEntity.id.id);
                    dataSource.entities.removeById(cesiumDrawingToolsProperties.pickedEntity.id);
                    cesiumDrawingToolsProperties.displayEntityDetailsDialog = false;
                },
            },
        ];
        // Billboard (Marker)
        if (Cesium.defined(cesiumDrawingToolsProperties.pickedEntity.billboard)) {
            // Initialise 'entityColor'
            entityColor = cesiumDrawingToolsProperties.pickedEntity.billboard.color.getValue(null);
            // Push additional actions for billboard entities
            cesiumDrawingToolsProperties.displayEntityDetailsActions.unshift({
                type: 'icon',
                title: 'Icon',
                isActivated: false,
                iconUrl: '../../assets/icons/solid/map-marker-alt-white.svg',
                function: function (event, overlayPanel, action) {
                    overlayPanel.toggle(event, event.target);
                },
            });
            // Polyline + Scribble
        }
        else if (Cesium.defined(cesiumDrawingToolsProperties.pickedEntity.polyline)) {
            // Initialise 'entityColor'
            entityColor = cesiumDrawingToolsProperties.pickedEntity.polyline.material.color.getValue(null);
            // Push additional actions for polyline entities
            cesiumDrawingToolsProperties.displayEntityDetailsActions.unshift({
                type: 'arrowhead',
                title: 'Add/Remove Arrowhead',
                isActivated: false,
                iconUrl: '../../assets/icons/solid/arrow-right-white.svg',
                function: function (event, overlayPanel, action) {
                    if (action) {
                        action.isActivated = !action.isActivated;
                        var currentEntityColor = cesiumDrawingToolsProperties.pickedEntity.polyline.material.color
                            .getValue(null);
                        if (action.isActivated === true) {
                            cesiumDrawingToolsProperties.pickedEntity.polyline.material =
                                new Cesium.PolylineArrowMaterialProperty(currentEntityColor);
                            cesiumDrawingToolsProperties.pickedEntity.polyline.width =
                                cesiumDrawingToolsProperties.pickedEntity.polyline.width + 10;
                        }
                        else {
                            cesiumDrawingToolsProperties.pickedEntity.polyline.material = currentEntityColor;
                            cesiumDrawingToolsProperties.pickedEntity.polyline.width =
                                cesiumDrawingToolsProperties.pickedEntity.polyline.width - 10;
                            if (cesiumDrawingToolsProperties.pickedEntity.polyline.width <= 0) {
                                cesiumDrawingToolsProperties.pickedEntity.polyline.width = 1;
                            }
                        }
                    }
                },
            });
            cesiumDrawingToolsProperties.displayEntityDetailsActions.unshift({
                type: 'width',
                title: 'Line Width',
                isActivated: false,
                iconUrl: '../../assets/icons/solid/line-width.svg',
                function: function (event, overlayPanel, action) {
                    overlayPanel.toggle(event, event.target);
                },
            });
            // Polygon (Note: Has additional color property - alpha)
        }
        else if (Cesium.defined(cesiumDrawingToolsProperties.pickedEntity.polygon)) {
            // Initialise 'entityColor' & 'entityColorAlpha'
            entityColor = cesiumDrawingToolsProperties.pickedEntity.polygon.material.color.getValue(null);
            entityColorAlpha = entityColor.alpha;
            // Push additional actions for polygon entities
            cesiumDrawingToolsProperties.displayEntityDetailsActions.unshift({
                type: 'alpha',
                title: 'Transparency',
                isActivated: false,
                iconUrl: '../../assets/icons/solid/transparency.svg',
                function: function (event, overlayPanel, action) {
                    overlayPanel.toggle(event, event.target);
                },
            });
            // Ellipse (Circle) (Note: Has additional color property - alpha)
        }
        else if (Cesium.defined(cesiumDrawingToolsProperties.pickedEntity.ellipse)) {
            // Initialise 'entityColor' & 'entityColorAlpha'
            entityColor = cesiumDrawingToolsProperties.pickedEntity.ellipse.material.color.getValue(null);
            entityColorAlpha = entityColor.alpha;
            // Push additional actions for ellipse entities
            cesiumDrawingToolsProperties.displayEntityDetailsActions.unshift({
                type: 'alpha',
                title: 'Transparency',
                isActivated: false,
                iconUrl: '../../assets/icons/solid/transparency.svg',
                function: function (event, overlayPanel, action) {
                    overlayPanel.toggle(event, event.target);
                },
            });
        }
        // Initialise entity color
        if (entityColor) {
            var entityColorRed = Cesium.Color.floatToByte(entityColor.red);
            var entityColorGreen = Cesium.Color.floatToByte(entityColor.green);
            var entityColorBlue = Cesium.Color.floatToByte(entityColor.blue);
            cesiumDrawingToolsProperties.selectedColor =
                this.rgbToHex(entityColorRed, entityColorGreen, entityColorBlue);
            cesiumDrawingToolsProperties.selectedColorAlpha = (entityColorAlpha * 10); // Note:
            // Convert
            // to 1-10
            // due to
            // slider
            // not
            // able to
            // set
            // decimal
            // steps
        }
    };
    CesiumService.prototype.componentToHex = function (c) {
        var hex = c.toString(16);
        return hex.length === 1 ? '0' + hex : hex;
    };
    CesiumService.prototype.rgbToHex = function (r, g, b) {
        return '#' + this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b);
    };
    CesiumService.prototype.getEntityDataSourceFromEntityId = function (cesiumViewer, entityId) {
        for (var i = 0; i < cesiumViewer.dataSources.length; i += 1) {
            var entity = cesiumViewer.dataSources.get(i).entities.getById(entityId);
            if (entity != null) {
                return cesiumViewer.dataSources.get(i);
            }
        }
    };
    CesiumService.prototype.prioritizePicks = function (pickedObjects) {
        var chosen;
        for (var i = 0; i < pickedObjects.length; i += 1) {
            var element = pickedObjects[i];
            if (Cesium.defined(element)) {
                var layerName = element.id.type.toString();
                console.log(layerName);
                switch (layerName) {
                    case this.appConfig.LAYER_NAMES.airTrackLayerName: {
                        return element;
                    }
                    case this.appConfig.LAYER_NAMES.runwayLayerName: {
                        return element;
                    }
                    case this.appConfig.LAYER_NAMES.airwayLayerName: {
                        return element;
                    }
                    case this.appConfig.LAYER_NAMES.droneRestrictionLayerName: {
                        return element;
                    }
                    case this.appConfig.LAYER_NAMES.firLayerName: {
                        return element;
                    }
                }
            }
        }
        // console.log('choosen', chosen.id.type);
        return chosen;
    };
    CesiumService.prototype.getEntity = function (cesiumViewer, entityId) {
        for (var i = 0; i < cesiumViewer.dataSources.length; i += 1) {
            var entity = cesiumViewer.dataSources.get(i).entities.getById(entityId);
            if (entity != null) {
                // console.log('picked entity', entity, cesiumViewer.dataSources.get(i).name);
                return entity;
            }
        }
    };
    CesiumService.prototype.initDrawMarkerButtonFunctions = function (cesiumViewer, cesiumDrawingToolsProperties, drawingTool) {
        var _this = this;
        var drawMarkerButton = document.getElementById(drawingTool.id);
        drawMarkerButton.addEventListener('click', function () {
            drawingTool.isActivated = !drawingTool.isActivated;
            var drawingToolsHandler = cesiumDrawingToolsProperties.drawingToolsHandler;
            if (drawingTool.isActivated) {
                // Reset/de-activate all other drawing tools
                _this.resetDrawingToolsButtons(cesiumDrawingToolsProperties, drawingTool);
                // Add LEFT_DOUBLE_CLICK action to start drawing marker
                drawingToolsHandler.setInputAction(function (click) {
                    var pickedEntity = cesiumViewer.scene.pick(click.position);
                    if (!pickedEntity) {
                        // Get 'lonInDegrees' & 'latInDegrees' from 'click.position'
                        var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
                        var cartesian = cesiumViewer.camera.pickEllipsoid(click.position, ellipsoid);
                        var cartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
                        var lonInDegrees = Cesium.Math.toDegrees(cartographic.longitude);
                        var latInDegrees = Cesium.Math.toDegrees(cartographic.latitude);
                        var heightInMetres = 0;
                        // Initialise entity id
                        cesiumDrawingToolsProperties.totalEntityCount += 1;
                        var entityId = 'marker-' + (cesiumDrawingToolsProperties.totalEntityCount);
                        var currDateTimestamp = __WEBPACK_IMPORTED_MODULE_3_moment__(new Date()).format('YYYYMMDD-hhmmss');
                        var dataSourceEntityId = cesiumDrawingToolsProperties.activeDataSource.name + ' - ' + entityId + ' - ' +
                            '[' + currDateTimestamp + ']';
                        // Draw marker entity (billboard)
                        var entity = cesiumDrawingToolsProperties.activeDataSource.entities.getOrCreateEntity(dataSourceEntityId);
                        entity.name = entityId;
                        entity.position = new Cesium.ConstantPositionProperty(Cesium.Cartesian3.fromDegrees(lonInDegrees, latInDegrees, heightInMetres));
                        entity.billboard = new Cesium.BillboardGraphics({
                            image: new Cesium.ConstantProperty('../../assets/markers/marker-white.png'),
                            // Marker
                            // color
                            // can
                            // be
                            // easily
                            // updated
                            // using
                            // 'color'
                            // property
                            height: 40,
                            width: 40,
                            color: Cesium.Color.RED,
                        });
                        // Add entity label
                        entity.label = new Cesium.LabelGraphics({
                            text: new Cesium.ConstantProperty(entity.name),
                            font: '12pt Lucida Sans',
                            style: new Cesium.ConstantProperty(Cesium.LabelStyle.FILL_AND_OUTLINE),
                            fillColor: Cesium.Color.WHITE,
                            outlineColor: Cesium.Color.WHITE,
                            outlineWidth: 1,
                            horizontalOrigin: new Cesium.ConstantProperty(Cesium.HorizontalOrigin.LEFT),
                            verticalOrigin: new Cesium.ConstantProperty(Cesium.VerticalOrigin.CENTER),
                            eyeOffset: new Cesium.Cartesian3(0, 0, -1),
                            pixelOffset: new Cesium.Cartesian2(20, 0),
                            // scale: Property,
                            show: true,
                        });
                        // Custom properties
                        entity.customProperties = {
                            uploadedContentList: [],
                        };
                        // Set 'cesiumDrawingToolsProperties.activeDataSource.show' to true if display is off
                        cesiumDrawingToolsProperties.activeDataSource.show = true;
                    }
                }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
            }
            else {
                drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
            }
        });
        return drawMarkerButton;
    };
    CesiumService.prototype.initDrawPolylineButtonFunctions = function (cesiumViewer, cesiumDrawingToolsProperties, drawingTool) {
        var _this = this;
        var drawPolylineButton = document.getElementById(drawingTool.id);
        drawPolylineButton.addEventListener('click', function () {
            drawingTool.isActivated = !drawingTool.isActivated;
            var drawingToolsHandler = cesiumDrawingToolsProperties.drawingToolsHandler;
            if (drawingTool.isActivated) {
                // Reset/de-activate all other drawing tools
                _this.resetDrawingToolsButtons(cesiumDrawingToolsProperties, drawingTool);
                var isDrawing_1 = false;
                var positions_1 = [];
                var tempIndicatorPoints_1;
                var polylineEntity_1;
                // Add LEFT_DOUBLE_CLICK action to start drawing polyline
                drawingToolsHandler.setInputAction(function (click) {
                    isDrawing_1 = !isDrawing_1;
                    if (isDrawing_1) {
                        // Get lon/lat in degrees from 'click.position' and push into 'positions'
                        var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
                        var cartesian = cesiumViewer.camera.pickEllipsoid(click.position, ellipsoid);
                        positions_1.push(cartesian);
                        // Initialise entity id
                        cesiumDrawingToolsProperties.totalEntityCount += 1;
                        var entityId = 'polyline-' + (cesiumDrawingToolsProperties.totalEntityCount);
                        var currDateTimestamp = __WEBPACK_IMPORTED_MODULE_3_moment__(new Date()).format('YYYYMMDD-hhmmss');
                        var dataSourceEntityId = cesiumDrawingToolsProperties.activeDataSource.name + ' - ' + entityId + ' - ' +
                            '[' + currDateTimestamp + ']';
                        // Draw polyline entity
                        polylineEntity_1 =
                            cesiumDrawingToolsProperties.activeDataSource.entities.getOrCreateEntity(dataSourceEntityId);
                        polylineEntity_1.name = entityId;
                        polylineEntity_1.polyline = {
                            positions: new Cesium.CallbackProperty(function () {
                                return positions_1; // Note: positions is constantly updated in the 'MOUSE_MOVE' handler
                            }, false),
                            material: Cesium.Color.RED,
                            // material: new Cesium.PolylineArrowMaterialProperty(Cesium.Color.RED),
                            width: 3,
                        };
                        // Add entity label (Note: 'position' is initialised to set label starting position)
                        var cartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
                        var lonInDegrees = Cesium.Math.toDegrees(cartographic.longitude);
                        var latInDegrees = Cesium.Math.toDegrees(cartographic.latitude);
                        var heightInMetres = 0;
                        polylineEntity_1.position = new Cesium.ConstantPositionProperty(Cesium.Cartesian3.fromDegrees(lonInDegrees, latInDegrees, heightInMetres));
                        polylineEntity_1.label = new Cesium.LabelGraphics({
                            text: new Cesium.ConstantProperty(polylineEntity_1.name),
                            font: '12pt Lucida Sans',
                            style: new Cesium.ConstantProperty(Cesium.LabelStyle.FILL_AND_OUTLINE),
                            fillColor: Cesium.Color.WHITE,
                            outlineColor: Cesium.Color.WHITE,
                            outlineWidth: 1,
                            horizontalOrigin: new Cesium.ConstantProperty(Cesium.HorizontalOrigin.LEFT),
                            verticalOrigin: new Cesium.ConstantProperty(Cesium.VerticalOrigin.CENTER),
                            eyeOffset: new Cesium.Cartesian3(0, 0, -1),
                            pixelOffset: new Cesium.Cartesian2(20, 0),
                            // scale: Property,
                            show: true,
                        });
                        // Custom properties
                        polylineEntity_1.customProperties = {
                            uploadedContentList: [],
                        };
                        // Set 'cesiumDrawingToolsProperties.activeDataSource.show' to true if display is off
                        cesiumDrawingToolsProperties.activeDataSource.show = true;
                        // Create a pointPrimitive collection to draw temp point indicators to show polyline
                        // joints
                        tempIndicatorPoints_1 = cesiumViewer.scene.primitives.add(new Cesium.PointPrimitiveCollection());
                        tempIndicatorPoints_1.add({
                            position: cartesian,
                            color: Cesium.Color.WHITE,
                        });
                    }
                    else {
                        var positionsConfirmed = positions_1.slice(); // Clone 'positions' without object
                        // reference
                        polylineEntity_1.polyline.positions = positionsConfirmed;
                        positions_1 = []; // Reset 'positions'
                        tempIndicatorPoints_1.removeAll(); // Reset 'tempIndicatorPoints'
                    }
                }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
                // Add LEFT_CLICK action to extend polyline
                drawingToolsHandler.setInputAction(function (click) {
                    if (isDrawing_1) {
                        // Get lon/lat in degrees from 'click.position' and push into 'positions' to extend
                        // polyline
                        var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
                        var cartesian = cesiumViewer.camera.pickEllipsoid(click.position, ellipsoid);
                        positions_1.push(cartesian);
                        // Extend temp point indicators to show polyline joints
                        tempIndicatorPoints_1.add({
                            position: cartesian,
                            color: Cesium.Color.WHITE,
                        });
                    }
                }, Cesium.ScreenSpaceEventType.LEFT_CLICK);
            }
            else {
                drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
                drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);
            }
        });
    };
    CesiumService.prototype.initDrawPolygonButtonFunctions = function (cesiumViewer, cesiumDrawingToolsProperties, drawingTool) {
        var _this = this;
        var drawPolygonButton = document.getElementById(drawingTool.id);
        drawPolygonButton.addEventListener('click', function () {
            drawingTool.isActivated = !drawingTool.isActivated;
            var drawingToolsHandler = cesiumDrawingToolsProperties.drawingToolsHandler;
            if (drawingTool.isActivated) {
                // Reset/de-activate all other drawing tools
                _this.resetDrawingToolsButtons(cesiumDrawingToolsProperties, drawingTool);
                var isDrawing_2 = false;
                var positionsInDegrees_1 = [];
                var tempIndicatorPoints_2;
                var polygonEntity_1;
                // Add LEFT_DOUBLE_CLICK action to start drawing polygons
                drawingToolsHandler.setInputAction(function (click) {
                    isDrawing_2 = !isDrawing_2;
                    if (isDrawing_2) {
                        // Get lon/lat in degrees from 'click.position' and push into 'positions'
                        var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
                        var cartesian = cesiumViewer.camera.pickEllipsoid(click.position, ellipsoid);
                        var cartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
                        var lonInDegrees = Cesium.Math.toDegrees(cartographic.longitude);
                        var latInDegrees = Cesium.Math.toDegrees(cartographic.latitude);
                        positionsInDegrees_1.push(lonInDegrees);
                        positionsInDegrees_1.push(latInDegrees);
                        // Initlialise entity id
                        cesiumDrawingToolsProperties.totalEntityCount += 1;
                        var entityId = 'polygon-' + (cesiumDrawingToolsProperties.totalEntityCount);
                        var currDateTimestamp = __WEBPACK_IMPORTED_MODULE_3_moment__(new Date()).format('YYYYMMDD-hhmmss');
                        var dataSourceEntityId = cesiumDrawingToolsProperties.activeDataSource.name + ' - ' + entityId + ' - ' +
                            '[' + currDateTimestamp + ']';
                        // Draw polygon entity
                        polygonEntity_1 =
                            cesiumDrawingToolsProperties.activeDataSource.entities.getOrCreateEntity(dataSourceEntityId);
                        polygonEntity_1.name = entityId;
                        polygonEntity_1.polygon = new Cesium.PolygonGraphics({
                            hierarchy: new Cesium.ConstantProperty(Cesium.Cartesian3.fromDegreesArray(positionsInDegrees_1)),
                            material: new Cesium.Color(1.0, 0.0, 0.0, 0.4),
                        });
                        // Set 'cesiumDrawingToolsProperties.activeDataSource.show' to true if display is off
                        cesiumDrawingToolsProperties.activeDataSource.show = true;
                        // Create a pointPrimitive collection to draw temp point indicators to show polygon
                        // joints
                        tempIndicatorPoints_2 = cesiumViewer.scene.primitives.add(new Cesium.PointPrimitiveCollection());
                        tempIndicatorPoints_2.add({
                            position: cartesian,
                            color: Cesium.Color.WHITE,
                        });
                    }
                    else {
                        var minimumNumOfPositionsToDrawAPolygon = 6; // Note: Stores 'lonInDegrees,
                        // latInDegrees', therefore minimum 3
                        // pts * 2 = 6
                        if (positionsInDegrees_1.length >= minimumNumOfPositionsToDrawAPolygon) {
                            var positionsInDegreesConfirmed = positionsInDegrees_1.slice(); // Clone positions
                            // without object
                            // reference
                            polygonEntity_1.polygon.hierarchy = Cesium.Cartesian3.fromDegreesArray(positionsInDegreesConfirmed);
                            // Add entity label
                            var cesiumJulianDate = Cesium.JulianDate.fromDate(new Date());
                            var center = Cesium.BoundingSphere.fromPoints(polygonEntity_1.polygon.hierarchy.getValue(cesiumJulianDate)).center;
                            Cesium.Ellipsoid.WGS84.scaleToGeodeticSurface(center, center);
                            polygonEntity_1.position = new Cesium.ConstantPositionProperty(center);
                            polygonEntity_1.label = new Cesium.LabelGraphics({
                                text: new Cesium.ConstantProperty(polygonEntity_1.name),
                                font: '12pt Lucida Sans',
                                style: new Cesium.ConstantProperty(Cesium.LabelStyle.FILL_AND_OUTLINE),
                                fillColor: Cesium.Color.WHITE,
                                outlineColor: Cesium.Color.WHITE,
                                outlineWidth: 1,
                                horizontalOrigin: new Cesium.ConstantProperty(Cesium.HorizontalOrigin.CENTER),
                                verticalOrigin: new Cesium.ConstantProperty(Cesium.VerticalOrigin.CENTER),
                                eyeOffset: new Cesium.Cartesian3(0, 0, -1),
                                pixelOffset: new Cesium.Cartesian2(0, 0),
                                // entity types
                                // scale: Property,
                                show: true,
                            });
                            // Custom properties
                            polygonEntity_1.customProperties = {
                                uploadedContentList: [],
                            };
                        }
                        else {
                            cesiumDrawingToolsProperties.activeDataSource.entities.removeById(polygonEntity_1.id);
                        }
                        positionsInDegrees_1 = []; // Reset 'positionsInDegrees'
                        tempIndicatorPoints_2.removeAll(); // Reset 'tempIndicatorPoints'
                    }
                }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
                // Add LEFT_CLICK action to extend polygon
                drawingToolsHandler.setInputAction(function (click) {
                    if (isDrawing_2) {
                        // Get lon/lat in degrees from 'click.position' and push into 'positionsInDegrees' to
                        // extend polygon
                        var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
                        var cartesian = cesiumViewer.camera.pickEllipsoid(click.position, ellipsoid);
                        var cartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
                        var lonInDegrees = Cesium.Math.toDegrees(cartographic.longitude);
                        var latInDegrees = Cesium.Math.toDegrees(cartographic.latitude);
                        positionsInDegrees_1.push(lonInDegrees);
                        positionsInDegrees_1.push(latInDegrees);
                        polygonEntity_1.polygon.hierarchy = Cesium.Cartesian3.fromDegreesArray(positionsInDegrees_1);
                        // Extend temp point indicators to show polygon joints
                        tempIndicatorPoints_2.add({
                            position: cartesian,
                            color: Cesium.Color.WHITE,
                        });
                    }
                }, Cesium.ScreenSpaceEventType.LEFT_CLICK);
            }
            else {
                drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
                drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);
            }
        });
    };
    CesiumService.prototype.initDrawCircleButtonFunctions = function (cesiumViewer, cesiumDrawingToolsProperties, drawingTool) {
        var _this = this;
        var drawCircleButton = document.getElementById(drawingTool.id);
        drawCircleButton.addEventListener('click', function () {
            drawingTool.isActivated = !drawingTool.isActivated;
            var drawingToolsHandler = cesiumDrawingToolsProperties.drawingToolsHandler;
            if (drawingTool.isActivated) {
                // Reset/de-activate all other drawing tools
                _this.resetDrawingToolsButtons(cesiumDrawingToolsProperties, drawingTool);
                var isDrawing_3 = false;
                var radiusInMetres_1;
                var startCartographic_1;
                var endCartographic_1;
                var tempIndicatorPoints_3;
                var radiusInMetresToolTipElement_1;
                var circleEntity_1;
                // Add LEFT_DOUBLE_CLICK action to start drawing circle
                drawingToolsHandler.setInputAction(function (click) {
                    isDrawing_3 = !isDrawing_3;
                    if (isDrawing_3) {
                        // Get lon/lat in degrees from 'click.position'
                        var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
                        var cartesian = cesiumViewer.camera.pickEllipsoid(click.position, ellipsoid);
                        startCartographic_1 = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
                        var lonInDegrees = Cesium.Math.toDegrees(startCartographic_1.longitude);
                        var latInDegrees = Cesium.Math.toDegrees(startCartographic_1.latitude);
                        var heightInMetres = 0;
                        // Initialise entity id
                        cesiumDrawingToolsProperties.totalEntityCount += 1;
                        var entityId = 'circle-' + (cesiumDrawingToolsProperties.totalEntityCount);
                        var currDateTimestamp = __WEBPACK_IMPORTED_MODULE_3_moment__(new Date()).format('YYYYMMDD-hhmmss');
                        var dataSourceEntityId = cesiumDrawingToolsProperties.activeDataSource.name + ' - ' + entityId + ' - ' +
                            '[' + currDateTimestamp + ']';
                        // Draw circle entity
                        radiusInMetres_1 = 0; // Start from 0
                        circleEntity_1 = cesiumDrawingToolsProperties.activeDataSource.entities.getOrCreateEntity(dataSourceEntityId);
                        circleEntity_1.name = entityId;
                        circleEntity_1.position = Cesium.Cartesian3.fromDegrees(lonInDegrees, latInDegrees, heightInMetres);
                        circleEntity_1.ellipse = {
                            semiMinorAxis: new Cesium.CallbackProperty(function () {
                                return radiusInMetres_1;
                            }, false),
                            semiMajorAxis: new Cesium.CallbackProperty(function () {
                                return radiusInMetres_1;
                            }, false),
                            height: 0,
                            material: new Cesium.Color(1.0, 0.0, 0.0, 0.4),
                        };
                        // Add entity label
                        circleEntity_1.label = new Cesium.LabelGraphics({
                            text: new Cesium.ConstantProperty(circleEntity_1.name),
                            font: '12pt Lucida Sans',
                            style: new Cesium.ConstantProperty(Cesium.LabelStyle.FILL_AND_OUTLINE),
                            fillColor: Cesium.Color.WHITE,
                            outlineColor: Cesium.Color.WHITE,
                            outlineWidth: 1,
                            horizontalOrigin: new Cesium.ConstantProperty(Cesium.HorizontalOrigin.LEFT),
                            verticalOrigin: new Cesium.ConstantProperty(Cesium.VerticalOrigin.CENTER),
                            eyeOffset: new Cesium.Cartesian3(0, 0, -1),
                            pixelOffset: new Cesium.Cartesian2(20, 0),
                            // scale: Property,
                            show: true,
                        });
                        // Custom properties
                        circleEntity_1.customProperties = {
                            uploadedContentList: [],
                        };
                        // Set 'cesiumDrawingToolsProperties.activeDataSource.show' to true if display is off
                        cesiumDrawingToolsProperties.activeDataSource.show = true;
                        // Create a pointPrimitive collection to draw temp point indicators to show circle
                        // center
                        tempIndicatorPoints_3 = cesiumViewer.scene.primitives.add(new Cesium.PointPrimitiveCollection());
                        tempIndicatorPoints_3.add({
                            position: cartesian,
                            color: Cesium.Color.WHITE,
                        });
                        // Add tooltip html element to show 'radiusInMetres' when drawing circle
                        var windowXYPosition = Cesium.SceneTransforms.wgs84ToWindowCoordinates(cesiumViewer.scene, cartesian);
                        radiusInMetresToolTipElement_1 = document.createElement('div');
                        radiusInMetresToolTipElement_1.id = 'temp-tooltip';
                        radiusInMetresToolTipElement_1.style.position = 'absolute';
                        radiusInMetresToolTipElement_1.style.backgroundColor = 'rgba(20, 20, 20, 0.5)';
                        radiusInMetresToolTipElement_1.style.font = '24px agency';
                        radiusInMetresToolTipElement_1.style.top = windowXYPosition.y + 'px';
                        radiusInMetresToolTipElement_1.style.left = (windowXYPosition.x + 5) + 'px';
                        radiusInMetresToolTipElement_1.innerHTML =
                            '<span class="title">Radius(Metres): ' + radiusInMetres_1.toFixed(2) + '</span>';
                        cesiumViewer.container.appendChild(radiusInMetresToolTipElement_1);
                    }
                    else {
                        var radiusInMetresConfirmed = radiusInMetres_1; // Clone positions without object
                        // reference
                        circleEntity_1.ellipse.semiMinorAxis = radiusInMetresConfirmed;
                        circleEntity_1.ellipse.semiMajorAxis = radiusInMetresConfirmed;
                        circleEntity_1.label.horizontalOrigin = Cesium.HorizontalOrigin.CENTER;
                        circleEntity_1.label.pixelOffset = new Cesium.Cartesian2(0, 0);
                        // Reset
                        radiusInMetres_1 = 0;
                        startCartographic_1 = null;
                        endCartographic_1 = null;
                        tempIndicatorPoints_3.removeAll(); // Reset 'tempIndicatorPoints'
                        cesiumViewer.container.removeChild(radiusInMetresToolTipElement_1);
                        radiusInMetresToolTipElement_1 = null;
                    }
                }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
                // Add MOUSE_MOVE action to expand/minimize circle during drawing
                drawingToolsHandler.setInputAction(function (movement) {
                    if (isDrawing_3 && startCartographic_1) {
                        // Get lon/lat in degrees from 'movement.endPosition' to expand/minimize circle during drawing
                        var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
                        var cartesian = cesiumViewer.camera.pickEllipsoid(movement.endPosition, ellipsoid);
                        // Note: 'startCartographic' is initialised in LEFT_DOUBLE_CLICK action
                        endCartographic_1 = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
                        var ellipsoidGeodesic = new Cesium.EllipsoidGeodesic(startCartographic_1, endCartographic_1);
                        radiusInMetres_1 = ellipsoidGeodesic.surfaceDistance;
                        // Update 'radiusInMetres' for tooltip html element
                        var windowXYPosition = Cesium.SceneTransforms.wgs84ToWindowCoordinates(cesiumViewer.scene, cartesian);
                        if (radiusInMetresToolTipElement_1) {
                            radiusInMetresToolTipElement_1.style.top = windowXYPosition.y + 'px';
                            radiusInMetresToolTipElement_1.style.left = (windowXYPosition.x + 10) + 'px';
                            radiusInMetresToolTipElement_1.innerHTML =
                                '<span class="title">Radius(Metres): ' + radiusInMetres_1.toFixed(2) + '</span>';
                        }
                    }
                }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);
            }
            else {
                drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
                drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE);
            }
        });
    };
    CesiumService.prototype.initDrawScribbleButtonFunctions = function (cesiumViewer, cesiumDrawingToolsProperties, drawingTool) {
        var _this = this;
        var drawScribbleButton = document.getElementById(drawingTool.id);
        drawScribbleButton.addEventListener('click', function () {
            drawingTool.isActivated = !drawingTool.isActivated;
            var drawingToolsHandler = cesiumDrawingToolsProperties.drawingToolsHandler;
            if (drawingTool.isActivated) {
                // Reset/de-activate all other drawing tools
                _this.resetDrawingToolsButtons(cesiumDrawingToolsProperties, drawingTool);
                var isDrawing_4 = false;
                var positions_2 = [];
                var tempIndicatorPoints_4;
                var scribblePolylineEntity_1;
                // Add LEFT_DOUBLE_CLICK action to start scribbling (i.e. draw scribble polyline entity)
                drawingToolsHandler.setInputAction(function (click) {
                    isDrawing_4 = !isDrawing_4;
                    if (isDrawing_4) {
                        // Get lon/lat in degrees from 'click.position' and push into 'positions'
                        var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
                        var cartesian = cesiumViewer.camera.pickEllipsoid(click.position, ellipsoid);
                        positions_2.push(cartesian);
                        // Initialise entity id
                        cesiumDrawingToolsProperties.totalEntityCount += 1;
                        var entityId = 'scribble-polyline-' + (cesiumDrawingToolsProperties.totalEntityCount);
                        var currDateTimestamp = __WEBPACK_IMPORTED_MODULE_3_moment__(new Date()).format('YYYYMMDD-hhmmss');
                        var dataSourceEntityId = cesiumDrawingToolsProperties.activeDataSource.name + ' - ' + entityId + ' - ' +
                            '[' + currDateTimestamp + ']';
                        // Draw scribble polyline entity
                        scribblePolylineEntity_1 =
                            cesiumDrawingToolsProperties.activeDataSource.entities.getOrCreateEntity(dataSourceEntityId);
                        scribblePolylineEntity_1.name = entityId;
                        scribblePolylineEntity_1.polyline = {
                            positions: new Cesium.CallbackProperty(function () {
                                return positions_2; // Note: positions is constantly updated in MOUSE_MOVE action
                            }, false),
                            material: Cesium.Color.RED,
                            width: 3,
                        };
                        // Add entity label
                        var cartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
                        var lonInDegrees = Cesium.Math.toDegrees(cartographic.longitude);
                        var latInDegrees = Cesium.Math.toDegrees(cartographic.latitude);
                        var heightInMetres = 0;
                        scribblePolylineEntity_1.position = new Cesium.ConstantPositionProperty(Cesium.Cartesian3.fromDegrees(lonInDegrees, latInDegrees, heightInMetres));
                        scribblePolylineEntity_1.label = new Cesium.LabelGraphics({
                            text: new Cesium.ConstantProperty(scribblePolylineEntity_1.name),
                            font: '12pt Lucida Sans',
                            style: new Cesium.ConstantProperty(Cesium.LabelStyle.FILL_AND_OUTLINE),
                            fillColor: Cesium.Color.WHITE,
                            outlineColor: Cesium.Color.WHITE,
                            outlineWidth: 1,
                            horizontalOrigin: new Cesium.ConstantProperty(Cesium.HorizontalOrigin.LEFT),
                            verticalOrigin: new Cesium.ConstantProperty(Cesium.VerticalOrigin.CENTER),
                            eyeOffset: new Cesium.Cartesian3(0, 0, -1),
                            pixelOffset: new Cesium.Cartesian2(20, 0),
                            // scale: Property,
                            show: true,
                        });
                        // Custom properties
                        scribblePolylineEntity_1.customProperties = {
                            uploadedContentList: [],
                        };
                        // Set 'cesiumDrawingToolsProperties.activeDataSource.show' to true if display is off
                        cesiumDrawingToolsProperties.activeDataSource.show = true;
                        // Create a pointPrimitive collection to draw temp point indicators to show start of scribble
                        tempIndicatorPoints_4 = cesiumViewer.scene.primitives.add(new Cesium.PointPrimitiveCollection());
                        tempIndicatorPoints_4.add({
                            position: cartesian,
                            color: Cesium.Color.WHITE,
                        });
                    }
                    else {
                        var positionsConfirmed = positions_2.slice(); // Clone positions without object reference
                        scribblePolylineEntity_1.polyline.positions = positionsConfirmed;
                        positions_2 = []; // Reset 'positions'
                        tempIndicatorPoints_4.removeAll(); // Reset 'tempIndicatorPoints'
                    }
                }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
                // Add MOUSE_MOVE action to extend/update scribbling (i.e. scribble polyline entity)
                drawingToolsHandler.setInputAction(function (movement) {
                    if (isDrawing_4) {
                        // Get lon/lat in degrees from 'click.position' to extend/update scribbling (i.e. scribble polyline entity)
                        var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
                        var cartesian = cesiumViewer.camera.pickEllipsoid(movement.endPosition, ellipsoid);
                        positions_2.push(cartesian);
                    }
                }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);
            }
            else {
                drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
                drawingToolsHandler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE);
            }
        });
    };
    CesiumService.prototype.addDefaultRightClickInputAction = function (cesiumViewer) {
        cesiumViewer.screenSpaceEventHandler.setInputAction(function (click) {
            console.log('ACTION');
            var cartesian;
            var cartographic;
            var lonInDegrees;
            var latInDegrees;
            var ellipsoid;
            // Camera position
            cartesian = cesiumViewer.camera.position;
            cartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
            lonInDegrees = Cesium.Math.toDegrees(cartographic.longitude).toFixed(8);
            latInDegrees = Cesium.Math.toDegrees(cartographic.latitude).toFixed(8);
            console.log('CAMERA: ' + lonInDegrees + ', ' + latInDegrees + ', ' +
                cesiumViewer.camera.positionCartographic.height + ', '
                + cesiumViewer.camera.pitch);
            // console.log('heading, pitch, roll: ' + cesiumViewer.camera.heading + ', ' + cesiumViewer.camera.pitch + ', '
            //   + cesiumViewer.camera.roll);
            // Click position
            ellipsoid = cesiumViewer.scene.globe.ellipsoid;
            cartesian = cesiumViewer.camera.pickEllipsoid(click.position, ellipsoid);
            cartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
            lonInDegrees = Cesium.Math.toDegrees(cartographic.longitude).toFixed(8);
            latInDegrees = Cesium.Math.toDegrees(cartographic.latitude).toFixed(8);
            console.log('RIGHT CLICK: ' + lonInDegrees + ', ' + latInDegrees + ', ' +
                cesiumViewer.camera.positionCartographic.height);
        }, Cesium.ScreenSpaceEventType.LEFT_UP);
    };
    CesiumService.prototype.addDefaultMouseMoveInputAction = function (cesiumViewer) {
        cesiumViewer.screenSpaceEventHandler.setInputAction(function (movement) {
            var ellipsoid = cesiumViewer.scene.globe.ellipsoid;
            var cartesian = cesiumViewer.camera.pickEllipsoid(movement.endPosition, ellipsoid);
            var cartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(cartesian);
            var mouseOverEntity = cesiumViewer.scene.pick(movement.endPosition);
            if (Cesium.defined(mouseOverEntity) && mouseOverEntity.id && mouseOverEntity.id.id) {
                document.body.style.cursor = 'pointer';
            }
            else {
                document.body.style.cursor = 'default';
            }
        }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);
    };
    CesiumService.prototype.convertDataSourceToGeoJson = function (dataSource) {
        var geoJsonString = '';
        var featureGeoJsonObj;
        var cesiumJulianDate = Cesium.JulianDate.fromDate(new Date());
        if (dataSource && dataSource.entities) {
            geoJsonString = '{"type":"FeatureCollection","features":[';
            for (var i = 0; i < dataSource.entities.values.length; i += 1) {
                var entity = dataSource.entities.values[i];
                var featureGeoJsonString = '';
                if (entity.billboard) {
                    // Properties in use in cesium billboard entities: 'id', 'name', 'position', 'billboard.image',
                    // 'billboard.height', 'billboard.width', 'billboard.color'
                    featureGeoJsonObj = {
                        type: 'Feature',
                        geometry: { type: 'Point', coordinates: [] },
                        properties: {},
                    };
                    // Initialise 'position' for 'featureGeoJsonObj.geometry.coordinates'
                    var cartographicPosition = Cesium.Ellipsoid.WGS84.cartesianToCartographic(entity.position.getValue(cesiumJulianDate));
                    featureGeoJsonObj.geometry.coordinates[0] = (cartographicPosition.longitude * 360) / (2 * Cesium.Math.PI);
                    featureGeoJsonObj.geometry.coordinates[1] = (cartographicPosition.latitude * 360) / (2 * Cesium.Math.PI);
                    // Initialise the following for 'featureGeoJsonObj.properties'
                    featureGeoJsonObj.properties.id = entity.id; // Initialise 'id'
                    featureGeoJsonObj.properties.name = entity.name; // Initialise 'name'
                    featureGeoJsonObj.properties.billboard = {
                        image: entity.billboard.image.getValue(cesiumJulianDate),
                        height: entity.billboard.height.getValue(cesiumJulianDate),
                        width: entity.billboard.width.getValue(cesiumJulianDate),
                        color: entity.billboard.color.getValue(cesiumJulianDate),
                    };
                    featureGeoJsonObj.properties.label = {
                        text: entity.label.text.getValue(cesiumJulianDate),
                        font: entity.label.font.getValue(cesiumJulianDate),
                        style: entity.label.style.getValue(cesiumJulianDate),
                        fillColor: entity.label.fillColor.getValue(cesiumJulianDate),
                        outlineColor: entity.label.outlineColor.getValue(cesiumJulianDate),
                        outlineWidth: entity.label.outlineWidth.getValue(cesiumJulianDate),
                        horizontalOrigin: entity.label.horizontalOrigin.getValue(cesiumJulianDate),
                        // verticalOrigin: entity.label.verticalOrigin.getValue(cesiumJulianDate),
                        eyeOffset: entity.label.eyeOffset.getValue(cesiumJulianDate),
                        pixelOffset: entity.label.pixelOffset.getValue(cesiumJulianDate),
                        // scale: entity.label.scale.getValue(cesiumJulianDate),
                        show: entity.label.show.getValue(cesiumJulianDate),
                    };
                    featureGeoJsonString = JSON.stringify(featureGeoJsonObj);
                }
                else if (entity.polyline) {
                    featureGeoJsonObj = {
                        type: 'Feature',
                        geometry: { type: 'LineString', coordinates: [] },
                        properties: {},
                    };
                    // Initialise 'featureGeoJsonObj.geometry.coordinates' (Note: 'positions' will be initialised from
                    // featureGeoJsonObj.properties.polyline instead during 'Import')
                    var positions = entity.polyline.positions.getValue(cesiumJulianDate);
                    for (var j = 0; j < positions.length; j += 1) {
                        var cartographicPosition = Cesium.Ellipsoid.WGS84.cartesianToCartographic(positions[j]);
                        var lonLatArray = [
                            (cartographicPosition.longitude * 360) / (2 * Cesium.Math.PI),
                            (cartographicPosition.latitude * 360) / (2 * Cesium.Math.PI),
                        ];
                        featureGeoJsonObj.geometry.coordinates.push(lonLatArray);
                    }
                    // Initialise the following for 'featureGeoJsonObj.properties'
                    featureGeoJsonObj.properties.id = entity.id; // Initialise 'id'
                    featureGeoJsonObj.properties.name = entity.name; // Initialise 'name'
                    featureGeoJsonObj.properties.polyline = {
                        positions: entity.polyline.positions.getValue(cesiumJulianDate),
                        material: entity.polyline.material.getValue(cesiumJulianDate),
                        width: entity.polyline.width.getValue(cesiumJulianDate),
                    };
                    featureGeoJsonObj.properties.label = {
                        text: entity.label.text.getValue(cesiumJulianDate),
                        font: entity.label.font.getValue(cesiumJulianDate),
                        style: entity.label.style.getValue(cesiumJulianDate),
                        fillColor: entity.label.fillColor.getValue(cesiumJulianDate),
                        outlineColor: entity.label.outlineColor.getValue(cesiumJulianDate),
                        outlineWidth: entity.label.outlineWidth.getValue(cesiumJulianDate),
                        horizontalOrigin: entity.label.horizontalOrigin.getValue(cesiumJulianDate),
                        // verticalOrigin: entity.label.verticalOrigin.getValue(cesiumJulianDate),
                        eyeOffset: entity.label.eyeOffset.getValue(cesiumJulianDate),
                        pixelOffset: entity.label.pixelOffset.getValue(cesiumJulianDate),
                        // scale: entity.label.scale.getValue(cesiumJulianDate),
                        show: entity.label.show.getValue(cesiumJulianDate),
                    };
                    featureGeoJsonString = JSON.stringify(featureGeoJsonObj);
                }
                else if (entity.polygon) {
                    featureGeoJsonObj = {
                        type: 'Feature',
                        geometry: { type: 'Polygon', coordinates: [] },
                        properties: {},
                    };
                    // Initialise 'featureGeoJsonObj.geometry.coordinates' (Note: 'positions' will be initialised from
                    // featureGeoJsonObj.properties.polygon.hierachy' instead during 'Import')
                    var hierarchy = entity.polygon.hierarchy.getValue(cesiumJulianDate);
                    var positions = hierarchy.positions;
                    if (!positions) {
                        positions = hierarchy;
                    }
                    var lonLatArraySet = [];
                    for (var j = 0; j < positions.length; j += 1) {
                        var cartographicPosition = Cesium.Ellipsoid.WGS84.cartesianToCartographic(positions[j]);
                        var lonLatArray = [
                            (cartographicPosition.longitude * 360) / (2 * Cesium.Math.PI),
                            (cartographicPosition.latitude * 360) / (2 * Cesium.Math.PI),
                        ];
                        lonLatArraySet.push(lonLatArray);
                    }
                    featureGeoJsonObj.geometry.coordinates.push(lonLatArraySet);
                    // Initialise the following for 'featureGeoJsonObj.properties'
                    featureGeoJsonObj.properties.id = entity.id; // Initialise 'id'
                    featureGeoJsonObj.properties.name = entity.name; // Initialise 'name'
                    featureGeoJsonObj.properties.polygon = {
                        hierarchy: entity.polygon.hierarchy.getValue(cesiumJulianDate),
                        material: entity.polygon.material.getValue(cesiumJulianDate),
                    };
                    featureGeoJsonObj.properties.label = {
                        text: entity.label.text.getValue(cesiumJulianDate),
                        font: entity.label.font.getValue(cesiumJulianDate),
                        style: entity.label.style.getValue(cesiumJulianDate),
                        fillColor: entity.label.fillColor.getValue(cesiumJulianDate),
                        outlineColor: entity.label.outlineColor.getValue(cesiumJulianDate),
                        outlineWidth: entity.label.outlineWidth.getValue(cesiumJulianDate),
                        horizontalOrigin: entity.label.horizontalOrigin.getValue(cesiumJulianDate),
                        verticalOrigin: entity.label.verticalOrigin.getValue(cesiumJulianDate),
                        eyeOffset: entity.label.eyeOffset.getValue(cesiumJulianDate),
                        pixelOffset: entity.label.pixelOffset.getValue(cesiumJulianDate),
                        // scale: entity.label.scale.getValue(cesiumJulianDate),
                        show: entity.label.show.getValue(cesiumJulianDate),
                    };
                    featureGeoJsonString = JSON.stringify(featureGeoJsonObj);
                }
                else if (entity.ellipse) {
                    featureGeoJsonObj = {
                        type: 'Feature',
                        geometry: { type: 'Point', coordinates: [] },
                        properties: {},
                    };
                    // Initialise 'position' for 'featureGeoJsonObj.geometry.coordinates'
                    var cartographicPosition = Cesium.Ellipsoid.WGS84.cartesianToCartographic(entity.position.getValue(cesiumJulianDate));
                    featureGeoJsonObj.geometry.coordinates[0] = (cartographicPosition.longitude * 360) / (2 * Cesium.Math.PI);
                    featureGeoJsonObj.geometry.coordinates[1] = (cartographicPosition.latitude * 360) / (2 * Cesium.Math.PI);
                    // Initialise the following for 'featureGeoJsonObj.properties'
                    featureGeoJsonObj.properties.id = entity.id; // Initialise 'id'
                    featureGeoJsonObj.properties.name = entity.name; // Initialise 'name'
                    featureGeoJsonObj.properties.position = entity.position.getValue(cesiumJulianDate);
                    featureGeoJsonObj.properties.ellipse = {
                        semiMinorAxis: entity.ellipse.semiMinorAxis.getValue(cesiumJulianDate),
                        semiMajorAxis: entity.ellipse.semiMajorAxis.getValue(cesiumJulianDate),
                        height: entity.ellipse.height.getValue(cesiumJulianDate),
                        material: entity.ellipse.material.getValue(cesiumJulianDate),
                    };
                    featureGeoJsonObj.properties.label = {
                        text: entity.label.text.getValue(cesiumJulianDate),
                        font: entity.label.font.getValue(cesiumJulianDate),
                        style: entity.label.style.getValue(cesiumJulianDate),
                        fillColor: entity.label.fillColor.getValue(cesiumJulianDate),
                        outlineColor: entity.label.outlineColor.getValue(cesiumJulianDate),
                        outlineWidth: entity.label.outlineWidth.getValue(cesiumJulianDate),
                        horizontalOrigin: entity.label.horizontalOrigin.getValue(cesiumJulianDate),
                        verticalOrigin: entity.label.verticalOrigin.getValue(cesiumJulianDate),
                        eyeOffset: entity.label.eyeOffset.getValue(cesiumJulianDate),
                        pixelOffset: entity.label.pixelOffset.getValue(cesiumJulianDate),
                        // scale: entity.label.scale.getValue(cesiumJulianDate),
                        show: entity.label.show.getValue(cesiumJulianDate),
                    };
                    featureGeoJsonString = JSON.stringify(featureGeoJsonObj);
                }
                geoJsonString += featureGeoJsonString;
                // If is not the last object/entity, add ','
                if ((dataSource.entities.values.length > 1) && (i !== (dataSource.entities.values.length - 1))) {
                    geoJsonString += ',';
                }
            }
        }
        geoJsonString += ']}'; // 'ending' of geojson string
        return geoJsonString;
    };
    CesiumService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__config_app_config__["a" /* AppConfig */]])
    ], CesiumService);
    return CesiumService;
}());



/***/ }),

/***/ "./src/app/service/loadMapLayer.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LoadMapLayerService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__service_cesium_service__ = __webpack_require__("./src/app/service/cesium.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config_app_config__ = __webpack_require__("./src/app/config/app.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_common_http__ = __webpack_require__("./node_modules/@angular/common/esm5/http.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var LoadMapLayerService = /** @class */ (function () {
    // airTrackLayerName = 'Air Track';
    // firLayerName = 'FIR';
    // airwayLayerName = 'Airway';
    // runwayLayerName = 'Runway';
    // droneRestrictionLayerName = 'Drone Restricted Zone';
    function LoadMapLayerService(cesiumService, appConfig, http) {
        this.cesiumService = cesiumService;
        this.appConfig = appConfig;
        this.http = http;
    }
    LoadMapLayerService.prototype.initAirTracks = function (cesiumViewer, cesiumDynamicDataSources) {
        var _this = this;
        // NEW
        // const layerName = 'Air Track';
        var dataSource = this.cesiumService.getDataSource(cesiumViewer, this.appConfig.LAYER_NAMES.airTrackLayerName);
        if (!dataSource) {
            // Need to initialize
            dataSource = this.cesiumService.createDataSource(cesiumViewer, this.appConfig.LAYER_NAMES.airTrackLayerName);
            dataSource.show = true; // Set 'dataSource.show' to true as default on create
            cesiumDynamicDataSources.push(dataSource);
        }
        // Add action listener to map movement
        this.addMapMoveEndAction(cesiumViewer);
        // Update track position
        setInterval(function () {
            _this.updateTracks(dataSource);
        }, 5000);
    };
    LoadMapLayerService.prototype.addMapMoveEndAction = function (cesiumViewer) {
        var _this = this;
        cesiumViewer.camera.moveEnd.addEventListener(function () {
            console.log('MOVE end');
            var cartesian;
            var cartographic;
            var lonInDegrees;
            var latInDegrees;
            // Get viewport
            var pixWidth = cesiumViewer.scene.canvas.clientWidth;
            var pixHeight = cesiumViewer.scene.canvas.clientHeight;
            // var topRight = cesiumViewer.scene.camera.pickEllipsoid(new Cesium.Cartesian2(pixWidth - 1, 1));
            var topLeft = cesiumViewer.scene.camera.pickEllipsoid(new Cesium.Cartesian2(1, 1));
            // var bottomLeft = cesiumViewer.scene.camera.pickEllipsoid(new Cesium.Cartesian2(1, pixHeight - 1));
            var bottomRight = cesiumViewer.scene.camera.pickEllipsoid(new Cesium.Cartesian2(pixWidth - 1, pixHeight - 1));
            if (!topLeft || !bottomRight) {
                console.warn("Failed to find viewer edge coordinates", [topLeft, bottomRight]);
            }
            cartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(topLeft);
            var lon1 = Cesium.Math.toDegrees(cartographic.longitude).toFixed(8);
            var lat1 = Cesium.Math.toDegrees(cartographic.latitude).toFixed(8);
            // console.log('top left', lat1, lon1);
            cartographic = cesiumViewer.scene.globe.ellipsoid.cartesianToCartographic(bottomRight);
            var lon2 = Cesium.Math.toDegrees(cartographic.longitude).toFixed(8);
            var lat2 = Cesium.Math.toDegrees(cartographic.latitude).toFixed(8);
            // console.log('bottom right', lat2, lon2);
            _this.appConfig.setBounds(lat1, lat2, lon1, lon2);
            var layerName = 'Air Track';
            var dataSource = _this.cesiumService.getDataSource(cesiumViewer, layerName);
            if (dataSource) {
                _this.updateTracks(dataSource);
            }
        });
        // Doesnt work
        // const rect = new Cesium.Rectangle();
        // cesiumViewer.camera.computeViewRectangle(Cesium.Ellipsoid.WGS84, rect);
        // console.log('rect', rect);
    };
    LoadMapLayerService.prototype.updateTracks = function (dataSource) {
        var _this = this;
        this.getTrackUpdateFromServer()
            .subscribe(function (data) {
            var tracks = data;
            for (var i = 0; i < Object.keys(data).length; i += 1) {
                var key = Object.keys(data)[i];
                if (key === 'full_count' || key === 'version') {
                    // ignore
                }
                else {
                    var bfPoint = tracks[key];
                    _this.plotTrack(dataSource, bfPoint);
                }
            }
        });
    };
    LoadMapLayerService.prototype.getTrackUpdateFromServer = function () {
        return this.http.get(this.appConfig.F24_URL + this.appConfig.BOUNDS + this.appConfig.OPTIONS);
    };
    LoadMapLayerService.prototype.plotTrack = function (dataSource, trackRaw) {
        if (trackRaw) {
            var track = {
                id: trackRaw[0],
                lat: trackRaw[1],
                lon: trackRaw[2],
                heading: trackRaw[3],
                alt: trackRaw[4],
                speed: trackRaw[5],
                unknown6: trackRaw[6],
                unknown7: trackRaw[7],
                aircraft: trackRaw[8],
                source: trackRaw[11],
                dest: trackRaw[12],
                callsign: trackRaw[13]
            };
            if (track.lat != null && track.lon != null) {
                // check if entity exists, if true, set entity show label value to that of previous entity
                var showLabel = true;
                var newEntity = dataSource.entities.getById(track.id);
                if (newEntity) {
                }
                else {
                    newEntity = dataSource.entities.getOrCreateEntity(track.id);
                }
                newEntity.name = track.id;
                var trackRotationInRadian = (360 - track.heading) * Math.PI / 180;
                newEntity.position = new Cesium.ConstantPositionProperty(Cesium.Cartesian3.fromDegrees(track.lon, track.lat, 1));
                newEntity.billboard = new Cesium.BillboardGraphics({
                    image: new Cesium.ConstantProperty('../../assets/icons/aircraft.png'),
                    height: 30,
                    width: 30,
                    pixelOffset: new Cesium.Cartesian2(15, 0),
                    // translucencyByDistance: new Cesium.NearFarScalar(0.5e4, 1.0, 0.5e4, 0.0),
                    color: Cesium.Color.BLUE,
                });
                newEntity.billboard.rotation = trackRotationInRadian;
                // Custom properties
                newEntity.type = 'Air Track'; // Used as dialog header and to identify that its a Non-Editable entity in
                // 'cesium.service'
                newEntity.data = [{
                        label: 'Id',
                        content: track.id,
                    },
                    {
                        label: 'Callsign',
                        content: track.callsign,
                    },
                    {
                        label: 'Lat',
                        content: track.lat,
                    },
                    {
                        label: 'Lon',
                        content: track.lon,
                    },
                    {
                        label: 'Heading',
                        content: track.heading,
                    },
                    {
                        label: 'Speed',
                        content: track.speed,
                    },
                    {
                        label: 'Aircraft',
                        content: track.aircraft,
                    },
                    {
                        label: 'Source',
                        content: track.source,
                    },
                    {
                        label: 'Destination',
                        content: track.dest,
                    },
                ];
            }
        }
    };
    // Creates a new Cesium color object from the given rgba string
    LoadMapLayerService.prototype.newColor = function (colorString, a) {
        var color = Cesium.Color.fromCssColorString(colorString);
        color.alpha = a / 255;
        return color;
    };
    LoadMapLayerService.prototype.initLayers = function (cesiumViewer, cesiumStaticDataSources) {
        this.initDroneRestrictedZoneLayer(cesiumViewer, cesiumStaticDataSources);
        this.initAirwayLayer(cesiumViewer, cesiumStaticDataSources);
        this.initRunwayLayer(cesiumViewer, cesiumStaticDataSources);
        this.initFIRLayer(cesiumViewer, cesiumStaticDataSources);
    };
    LoadMapLayerService.prototype.initDroneRestrictedZoneLayer = function (cesiumViewer, cesiumStaticDataSources) {
        var layerName = this.appConfig.LAYER_NAMES.droneRestrictionLayerName;
        var dataSource = this.cesiumService.getDataSource(cesiumViewer, layerName);
        if (!dataSource) {
            dataSource = this.cesiumService.createDataSource(cesiumViewer, layerName);
            dataSource.show = true; // Set 'dataSource.show' to true as default on create
            cesiumStaticDataSources.push(dataSource);
        }
        var fillColor = this.newColor('#ffffff', 70); // Note: Modifies zone polygon
        // styling
        var strokeColor = this.newColor('#ffffff', 255); // Note: Modifies zone polygon
        // styling
        var promise = Cesium.GeoJsonDataSource.load(this.appConfig.RESTRICTED_AIRSPACE_URL, {
            stroke: strokeColor,
            fill: fillColor,
            strokeWidth: 3,
            markerSymbol: '?',
        });
        promise.then(function (loadedDataSource) {
            if (loadedDataSource.entities) {
                var entities = loadedDataSource.entities.values;
                for (var i = 0; i < entities.length; i += 1) {
                    var entity = entities[i];
                    // console.log(entity);
                    // Note: Does not use 'getOrCreateEntity' to create a new entity. It reuses/adds original
                    // entity object from 'loadedDataSource'
                    dataSource.entities.add(entity);
                    // Note: To customise color and outline, modify the property 'entity.polygon.material'
                    // and entity.polygon.outlineColor'
                    entity.name = layerName + ' - ' + entity.properties['MAPTIP'];
                    // Custom properties
                    entity.type = layerName; // Used as dialog header and to identify that its a Non-Editable
                    // entity in 'cesium.service'
                    entity.data = [
                        {
                            label: 'Zone Name',
                            content: entity.properties['MAPTIP'],
                        },
                        {
                            label: 'Description',
                            content: entity.properties['DESCRIPTIO'],
                        },
                    ];
                }
            }
        }, function (errorMsg) {
            console.log(errorMsg); // Error!
        });
    };
    LoadMapLayerService.prototype.initAirwayLayer = function (cesiumViewer, cesiumStaticDataSources) {
        var layerName = this.appConfig.LAYER_NAMES.airwayLayerName;
        var dataSource = this.cesiumService.getDataSource(cesiumViewer, layerName);
        if (!dataSource) {
            dataSource = this.cesiumService.createDataSource(cesiumViewer, layerName);
            dataSource.show = false; // Set 'dataSource.show' to true as default on create
            cesiumStaticDataSources.push(dataSource);
        }
        // const fillColor: Cesium.Color = this.newColor('#ffffff', 70); // Note: Modifies zone polygon
        // styling
        var strokeColor = this.newColor('#f427c8', 255); // Note: Modifies zone polygon
        // styling
        var promise = Cesium.GeoJsonDataSource.load(this.appConfig.AIRWAY_URL, {
            stroke: strokeColor,
            // fill: fillColor,
            strokeWidth: 1,
            markerSymbol: '?',
        });
        promise.then(function (loadedDataSource) {
            if (loadedDataSource.entities) {
                var entities = loadedDataSource.entities.values;
                for (var i = 0; i < entities.length; i += 1) {
                    var entity = entities[i];
                    // console.log(entity);
                    // Note: Does not use 'getOrCreateEntity' to create a new entity. It reuses/adds original
                    // entity object from 'loadedDataSource'
                    dataSource.entities.add(entity);
                    // Note: To customise color and outline, modify the property 'entity.polygon.material'
                    // and entity.polygon.outlineColor'
                    entity.name = layerName + ' - ' + i;
                    // Custom properties
                    entity.type = layerName; // Used as dialog header and to identify that its a Non-Editable
                    // entity in 'cesium.service'
                    entity.data = [];
                }
            }
        }, function (errorMsg) {
            console.log(errorMsg); // Error!
        });
    };
    LoadMapLayerService.prototype.initFIRLayer = function (cesiumViewer, cesiumStaticDataSources) {
        var layerName = this.appConfig.LAYER_NAMES.firLayerName;
        var dataSource = this.cesiumService.getDataSource(cesiumViewer, layerName);
        if (!dataSource) {
            dataSource = this.cesiumService.createDataSource(cesiumViewer, layerName);
            dataSource.show = true; // Set 'dataSource.show' to true as default on create
            cesiumStaticDataSources.push(dataSource);
        }
        var fillColor = this.newColor('#ffffff', 1); // Note: Modifies zone polygon
        // styling
        var strokeColor = this.newColor('#f4c842', 255); // Note: Modifies zone polygon
        // styling
        var promise = Cesium.GeoJsonDataSource.load(this.appConfig.FIR_VECTOR_URL, {
            stroke: strokeColor,
            fill: fillColor,
            strokeWidth: 6,
            markerSymbol: '?',
        });
        promise.then(function (loadedDataSource) {
            if (loadedDataSource.entities) {
                var entities = loadedDataSource.entities.values;
                for (var i = 0; i < entities.length; i += 1) {
                    var entity = entities[i];
                    // console.log(entity);
                    // Note: Does not use 'getOrCreateEntity' to create a new entity. It reuses/adds original
                    // entity object from 'loadedDataSource'
                    dataSource.entities.add(entity);
                    // Note: To customise color and outline, modify the property 'entity.polygon.material'
                    // and entity.polygon.outlineColor'
                    entity.name = layerName + ' - ' + i;
                    // Custom properties
                    entity.type = layerName; // Used as dialog header and to identify that its a Non-Editable
                    // entity in 'cesium.service'
                    entity.data = [
                        {
                            label: 'FIR Name',
                            content: entity.properties['FIRname'],
                        },
                        {
                            label: 'ICAO Code',
                            content: entity.properties['ICAOCODE'],
                        },
                        {
                            label: 'Area',
                            content: entity.properties['AREA'],
                        },
                        {
                            label: 'Perimeter',
                            content: entity.properties['PERIMETER'],
                        },
                    ];
                }
            }
        }, function (errorMsg) {
            console.log(errorMsg); // Error!
        });
    };
    LoadMapLayerService.prototype.initRunwayLayer = function (cesiumViewer, cesiumStaticDataSources) {
        var layerName = this.appConfig.LAYER_NAMES.runwayLayerName;
        var dataSource = this.cesiumService.getDataSource(cesiumViewer, layerName);
        if (!dataSource) {
            dataSource = this.cesiumService.createDataSource(cesiumViewer, layerName);
            dataSource.show = true; // Set 'dataSource.show' to true as default on create
            cesiumStaticDataSources.push(dataSource);
        }
        var fillColor = this.newColor('#ffffff', 0); // Note: Modifies zone polygon
        // styling
        var strokeColor = this.newColor('#f75231', 255); // Note: Modifies zone polygon
        // styling
        var promise = Cesium.GeoJsonDataSource.load(this.appConfig.RUNWAYS_URL, {
            stroke: strokeColor,
            fill: fillColor,
            strokeWidth: 3,
            markerSymbol: '?',
        });
        promise.then(function (loadedDataSource) {
            if (loadedDataSource.entities) {
                var entities = loadedDataSource.entities.values;
                for (var i = 0; i < entities.length; i += 1) {
                    var entity = entities[i];
                    // console.log(entity);
                    // Note: Does not use 'getOrCreateEntity' to create a new entity. It reuses/adds original
                    // entity object from 'loadedDataSource'
                    dataSource.entities.add(entity);
                    // Note: To customise color and outline, modify the property 'entity.polygon.material'
                    // and entity.polygon.outlineColor'
                    entity.name = layerName + ' - ' + i;
                    // Custom properties
                    entity.type = layerName; // Used as dialog header and to identify that its a Non-Editable
                    // entity in 'cesium.service'
                    entity.data = [
                        {
                            label: 'Airport',
                            content: entity.properties['ARPT_IDENT'],
                        },
                        {
                            label: 'Runway Name',
                            content: entity.properties['RWY'],
                        },
                        {
                            label: 'Runway Width',
                            content: entity.properties['RWY_WIDTH'],
                        },
                    ];
                }
            }
        }, function (errorMsg) {
            console.log(errorMsg); // Error!
        });
    };
    //to load from ATSH folder
    LoadMapLayerService.prototype.initAirwayData = function () {
        var airwayData = [];
        var fileDir = "../data/geojson/ATSH/";
        var fileName = "50_ATSH_data_";
        var endIdx = 72;
        var that = this;
        for (var i = 0; i <= endIdx; i++) {
            var fullFileName = fileDir + fileName + (i * 1000).toString() + ".geojson";
            this.http.get(fullFileName)
                .subscribe(function (res) {
                var a = res.json();
                // console.log(a.features);
                for (var _i = 0, _a = a.features; _i < _a.length; _i++) {
                    var airway = _a[_i];
                    if (that.isWithinInterestZone(airway.geometry.coordinates)) {
                        // console.log(airway.geometry.coordinates);
                        // that.plotAirway(airway.geometry.coordinates);
                        airwayData.push(airway.geometry.coordinates);
                    }
                }
                // console.log("airwayData", that.airwayData.length, that.airwayData);
            }, function (error) { console.log("Error happened" + error); }, function () {
            });
        }
    };
    LoadMapLayerService.prototype.isWithinInterestZone = function (coordArr) {
        //check if 
        var UPPER_LAT = 11.57;
        var UPPER_LON = 117.1;
        var LOWER_LAT = -0.87;
        var LOWER_LON = 102.15;
        if (coordArr.length === 2) {
            var coord_start = coordArr[0];
            var coord_end = coordArr[1];
            // console.log(coord_start[0], coord_start[1]);
            if (coord_start[0] < UPPER_LON && coord_start[0] > LOWER_LON && coord_start[1] < UPPER_LAT && coord_start[1] > LOWER_LAT) {
                return true;
            }
            else if (coord_end[0] < UPPER_LON && coord_start[0] > LOWER_LON && coord_end[1] < UPPER_LAT && coord_end[1] > LOWER_LAT) {
                //check second point
                return true;
            }
            else {
                return false;
            }
        }
        else {
            console.error("length of coordinate array is not 2", coordArr);
        }
    };
    LoadMapLayerService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__service_cesium_service__["a" /* CesiumService */], __WEBPACK_IMPORTED_MODULE_2__config_app_config__["a" /* AppConfig */], __WEBPACK_IMPORTED_MODULE_3__angular_common_http__["a" /* HttpClient */]])
    ], LoadMapLayerService);
    return LoadMapLayerService;
}());



/***/ }),

/***/ "./src/app/service/web/client.web.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ClientWebService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_add_operator_map__ = __webpack_require__("./node_modules/rxjs/_esm5/add/operator/map.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Handles REST API calls to web services.
 */
var ClientWebService = /** @class */ (function () {
    function ClientWebService() {
    }
    /**
     * Initializes connection to STOMP web socket.
     */
    ClientWebService.prototype.initStomp = function () {
    };
    ClientWebService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [])
    ], ClientWebService);
    return ClientWebService;
}());



/***/ }),

/***/ "./src/app/service/web/socket.web.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SocketWebService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__stomp_ng2_stompjs__ = __webpack_require__("./node_modules/@stomp/ng2-stompjs/@stomp/ng2-stompjs.es5.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config_web_config__ = __webpack_require__("./src/app/config/web.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map__ = __webpack_require__("./node_modules/rxjs/_esm5/add/operator/map.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Handles web socket connection to the server.
 */
var SocketWebService = /** @class */ (function () {
    function SocketWebService(stompService) {
        this.stompService = stompService;
    }
    SocketWebService.prototype.init = function () {
        this.initSocket();
        // this.subscribeAll();
    };
    /**
     * Initializes connection to STOMP web socket.
     */
    SocketWebService.prototype.initSocket = function () {
        // Web socket configuration
        var stompConfig = {
            url: 'ws://' + __WEBPACK_IMPORTED_MODULE_2__config_web_config__["a" /* WebConfig */].SERVER_URL + '/subscribe/websocket',
            headers: {},
            heartbeat_in: 0,
            heartbeat_out: 20000,
            reconnect_delay: 5000,
            debug: false,
        };
        this.stompService.config = stompConfig;
        this.stompService.initAndConnect();
    };
    /**
     * Subscribe to all required message queues.
     */
    SocketWebService.prototype.subscribeAll = function () {
        // this.subscribeQueue('/topic/BFT').subscribe((msgBody: string) =>
        //   this.bftService.updateBFT(JSON.parse(msgBody)),
        // );
        // TODO: Add future subscriptions here
    };
    /**
     * Subscribes to a single message queue.
     */
    SocketWebService.prototype.subscribeQueue = function (queueName) {
        var subscription = this.stompService.subscribe(queueName);
        return subscription.map(function (message) {
            return message.body;
        });
    };
    SocketWebService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__stomp_ng2_stompjs__["a" /* StompRService */]])
    ], SocketWebService);
    return SocketWebService;
}());



/***/ }),

/***/ "./src/environments/environment.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return environment; });
// The file contents for the current environment will overwrite these during build.
// The build system defaults to the dev environment which uses `environment.ts`, but if you do
// `ng build --env=prod` then `environment.prod.ts` will be used instead.
// The list of which env maps to which file can be found in `.angular-cli.json`.
var environment = {
    production: false,
};


/***/ }),

/***/ "./src/main.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("./node_modules/@angular/core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_platform_browser_dynamic__ = __webpack_require__("./node_modules/@angular/platform-browser-dynamic/esm5/platform-browser-dynamic.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__app_app_module__ = __webpack_require__("./src/app/app.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__environments_environment__ = __webpack_require__("./src/environments/environment.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_hammerjs__ = __webpack_require__("./node_modules/hammerjs/hammer.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_hammerjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_hammerjs__);




 // Some components (mat-slide-toggle, mat-slider, matTooltip) rely on HammerJS
// for gestures
if (__WEBPACK_IMPORTED_MODULE_3__environments_environment__["a" /* environment */].production) {
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["enableProdMode"])();
}
Object(__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser_dynamic__["a" /* platformBrowserDynamic */])().bootstrapModule(__WEBPACK_IMPORTED_MODULE_2__app_app_module__["a" /* AppModule */])
    .catch(function (err) { return console.log(err); });


/***/ }),

/***/ 0:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__("./src/main.ts");


/***/ })

},[0]);
//# sourceMappingURL=main.bundle.js.map